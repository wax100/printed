<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      '345edb5c4f71e2ca791bf9627e1f23a3' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.create","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form class=\\"well create\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\n\\t<div id=\\"ticket-preview-placeholder\\"><\\/div>\\n\\n\\t<input type=\\"hidden\\" name=\\"tid\\" value=\\"0\\" \\/>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\n\\t\\t<select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\n\\t\\t<input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\" value=\\"\\" maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\" rows=\\"10\\"><\\/textarea>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"ticket-form-files\\">\\n\\t\\t[[+files]]\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-actions row\\">\\n\\t\\t<div class=\\"col-md-6\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"col-md-6 move-right\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\" \\/>\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_create.tpl","content":"<form class=\\"well create\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\n\\t<div id=\\"ticket-preview-placeholder\\"><\\/div>\\n\\n\\t<input type=\\"hidden\\" name=\\"tid\\" value=\\"0\\" \\/>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\n\\t\\t<select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\n\\t\\t<input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\" value=\\"\\" maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\" rows=\\"10\\"><\\/textarea>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"ticket-form-files\\">\\n\\t\\t[[+files]]\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-actions row\\">\\n\\t\\t<div class=\\"col-md-6\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"col-md-6 move-right\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\" \\/>\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n<\\/form>"}',
        'guid' => '24c508e44d5a7ab321cc62efe58c005b',
        'native_key' => NULL,
        'signature' => '29007c22ff9693d7d06669ea361db6b9',
      ),
      'd6a56176bee33c6cb96b4b12dc2015c4' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.update","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form class=\\"well update\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\n\\t<div id=\\"ticket-preview-placeholder\\"><\\/div>\\n\\n\\t<input type=\\"hidden\\" name=\\"tid\\" value=\\"[[+id]]\\" \\/>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\n\\t\\t<select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\n\\t\\t<input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\" value=\\"[[+pagetitle]]\\" maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\" rows=\\"10\\">[[+content]]<\\/textarea>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"ticket-form-files\\">\\n\\t\\t[[+files]]\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-actions row\\">\\n\\t\\t<div class=\\"col-md-6\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"col-md-6 move-right\\">\\n\\t\\t\\t[[!+published:is=`1`:then=`\\n\\t\\t\\t<a href=\\"[[~[[+id]]?scheme=`full`]]\\" class=\\"btn btn-default btn-xs\\" target=\\"_blank\\">[[%ticket_open]]<\\/a>\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\" title=\\"\\" \\/>\\n\\t\\t\\t`:else=`\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\" \\/>\\n\\t\\t\\t`]]\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-default save\\" name=\\"save\\" value=\\"[[%ticket_save]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_update.tpl","content":"<form class=\\"well update\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\n\\t<div id=\\"ticket-preview-placeholder\\"><\\/div>\\n\\n\\t<input type=\\"hidden\\" name=\\"tid\\" value=\\"[[+id]]\\" \\/>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\n\\t\\t<select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\n\\t\\t<input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\" value=\\"[[+pagetitle]]\\" maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-group\\">\\n\\t\\t<textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\" rows=\\"10\\">[[+content]]<\\/textarea>\\n\\t\\t<span class=\\"error\\"><\\/span>\\n\\t<\\/div>\\n\\n\\t<div class=\\"ticket-form-files\\">\\n\\t\\t[[+files]]\\n\\t<\\/div>\\n\\n\\t<div class=\\"form-actions row\\">\\n\\t\\t<div class=\\"col-md-6\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"col-md-6 move-right\\">\\n\\t\\t\\t[[!+published:is=`1`:then=`\\n\\t\\t\\t<a href=\\"[[~[[+id]]?scheme=`full`]]\\" class=\\"btn btn-default btn-xs\\" target=\\"_blank\\">[[%ticket_open]]<\\/a>\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\" title=\\"\\" \\/>\\n\\t\\t\\t`:else=`\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\" \\/>\\n\\t\\t\\t`]]\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-default save\\" name=\\"save\\" value=\\"[[%ticket_save]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n<\\/form>"}',
        'guid' => 'ee9e26017afd70de2743268c9bd2b42d',
        'native_key' => NULL,
        'signature' => 'e22677bf1bbd70635fea135662ccb2e1',
      ),
      '97045cf88580ff41f606dbb44ed8f267' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.preview","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h3 class=\\"title\\">[[+pagetitle]]<\\/h3>\\n<div class=\\"content\\">[[+content]]<\\/div>\\n<h5 class=\\"author\\">[[+modx.user.id:userinfo=`username`]]<\\/h5>\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_preview.tpl","content":"<h3 class=\\"title\\">[[+pagetitle]]<\\/h3>\\n<div class=\\"content\\">[[+content]]<\\/div>\\n<h5 class=\\"author\\">[[+modx.user.id:userinfo=`username`]]<\\/h5>\\n"}',
        'guid' => '15de35072615465149f015c6c6b841a8',
        'native_key' => NULL,
        'signature' => 'a53b61d8e28194d86c96e2fe03b479a0',
      ),
      '6e71cf785f2dbb080ff5d68ed31bd741' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.files","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"ticket-files-list\\">\\n\\t[[+files]]\\n\\t<div class=\\"clearfix\\"><\\/div>\\n<\\/div>\\n\\n<div id=\\"ticket-files-container\\" data-action=\\"ticket\\/file\\/upload\\">\\n\\t<a id=\\"ticket-files-select\\" href=\\"javascript:;\\">[[%ticket_file_select]]<\\/a>\\n\\t<div id=\\"ticket-files-progress\\">\\n\\t\\t<span id=\\"ticket-files-progress-count\\">0\\/0<\\/span>\\n\\t\\t<span id=\\"ticket-files-progress-percent\\">0%<\\/span>\\n\\t\\t<div id=\\"ticket-files-progress-bar\\"><\\/div>\\n\\t<\\/div>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_files.tpl","content":"<div id=\\"ticket-files-list\\">\\n\\t[[+files]]\\n\\t<div class=\\"clearfix\\"><\\/div>\\n<\\/div>\\n\\n<div id=\\"ticket-files-container\\" data-action=\\"ticket\\/file\\/upload\\">\\n\\t<a id=\\"ticket-files-select\\" href=\\"javascript:;\\">[[%ticket_file_select]]<\\/a>\\n\\t<div id=\\"ticket-files-progress\\">\\n\\t\\t<span id=\\"ticket-files-progress-count\\">0\\/0<\\/span>\\n\\t\\t<span id=\\"ticket-files-progress-percent\\">0%<\\/span>\\n\\t\\t<div id=\\"ticket-files-progress-bar\\"><\\/div>\\n\\t<\\/div>\\n<\\/div>"}',
        'guid' => 'f3c2584d77903c6c6a07a7a7183a5538',
        'native_key' => NULL,
        'signature' => 'a6a6ada1c6f542e8cc95c96d5afe9ff3',
      ),
      'faaca1a6d6585fa6ea86e637b71bc0ff' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.file","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\n\\t<a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\n\\t\\t<div class=\\"ticket-file-image-wrapper\\">\\n\\t\\t\\t[[+file]]\\n\\t\\t<\\/div>\\n\\t<\\/a>\\n\\t<div class=\\"ticket-file-meta\\">\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\n\\t<\\/div>\\n\\t<div class=\\"ticket-file-template\\">\\n\\t\\t<a href=\\"[[+url]]\\">\\n\\t\\t\\t[[+name]]\\n\\t\\t<\\/a>\\n\\t<\\/div>\\n<\\/div>\\n<!--tickets_thumb <img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\" \\/>-->\\n<!--tickets_deleted  deleted-->\\n<!--tickets_new  new-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_file.tpl","content":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\n\\t<a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\n\\t\\t<div class=\\"ticket-file-image-wrapper\\">\\n\\t\\t\\t[[+file]]\\n\\t\\t<\\/div>\\n\\t<\\/a>\\n\\t<div class=\\"ticket-file-meta\\">\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\n\\t<\\/div>\\n\\t<div class=\\"ticket-file-template\\">\\n\\t\\t<a href=\\"[[+url]]\\">\\n\\t\\t\\t[[+name]]\\n\\t\\t<\\/a>\\n\\t<\\/div>\\n<\\/div>\\n<!--tickets_thumb <img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\" \\/>-->\\n<!--tickets_deleted  deleted-->\\n<!--tickets_new  new-->"}',
        'guid' => 'acb5355cfa6cbe37da04a757ff1430f8',
        'native_key' => NULL,
        'signature' => '8c5eef424247fe1dd54f9fe9b1f5a37e',
      ),
      '4113b7558f49e20641bf257d2cd1bfd6' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.image","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\n\\t<a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\n\\t\\t<div class=\\"ticket-file-image-wrapper\\">\\n\\t\\t\\t<img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\" \\/>\\n\\t\\t<\\/div>\\n\\t<\\/a>\\n\\t<div class=\\"ticket-file-meta\\">\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\n\\t<\\/div>\\n\\t<div class=\\"ticket-file-template\\">\\n\\t\\t<a href=\\"[[+url]]\\" title=\\"[[+name]]\\">\\n\\t\\t\\t<img src=\\"[[+thumb]]\\" \\/>\\n\\t\\t<\\/a>\\n\\t<\\/div>\\n<\\/div>\\n<!--tickets_deleted  deleted-->\\n<!--tickets_new  new-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_image.tpl","content":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\n\\t<a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\n\\t\\t<div class=\\"ticket-file-image-wrapper\\">\\n\\t\\t\\t<img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\" \\/>\\n\\t\\t<\\/div>\\n\\t<\\/a>\\n\\t<div class=\\"ticket-file-meta\\">\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\n\\t\\t<br\\/>\\n\\t\\t<span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\n\\t<\\/div>\\n\\t<div class=\\"ticket-file-template\\">\\n\\t\\t<a href=\\"[[+url]]\\" title=\\"[[+name]]\\">\\n\\t\\t\\t<img src=\\"[[+thumb]]\\" \\/>\\n\\t\\t<\\/a>\\n\\t<\\/div>\\n<\\/div>\\n<!--tickets_deleted  deleted-->\\n<!--tickets_new  new-->"}',
        'guid' => '56b1eff85de200ebc632db8a3b672b95',
        'native_key' => NULL,
        'signature' => '72f5f3bdf88e5bf6392875f55e89b185',
      ),
      '3910013ec8616d084c09b731cd2e1350' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.ticket.latest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"tickets-latest-row\\">\\n\\t<span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span class=\\"date\\">[[+date_ago]]<\\/span>\\n\\t<br\\/>\\n\\t<span class=\\"section\\">\\n\\t\\t<i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> <a href=\\"[[~[[+section.id]]]]\\">[[+section.pagetitle]]<\\/a> <span class=\\"arrow\\">&rarr;<\\/span>\\n\\t<\\/span>\\n\\t<span class=\\"ticket\\">\\n\\t\\t<a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a>\\n\\t<\\/span>\\n\\t<nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_latest.tpl","content":"<div class=\\"tickets-latest-row\\">\\n\\t<span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span class=\\"date\\">[[+date_ago]]<\\/span>\\n\\t<br\\/>\\n\\t<span class=\\"section\\">\\n\\t\\t<i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> <a href=\\"[[~[[+section.id]]]]\\">[[+section.pagetitle]]<\\/a> <span class=\\"arrow\\">&rarr;<\\/span>\\n\\t<\\/span>\\n\\t<span class=\\"ticket\\">\\n\\t\\t<a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a>\\n\\t<\\/span>\\n\\t<nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\n<\\/div>"}',
        'guid' => 'a1e9ba21f87ed74aa9cd6bd1f06b03d1',
        'native_key' => NULL,
        'signature' => 'e94802a8e71dd0575223d21602cbb5ba',
      ),
      '5386491ddbe53ca006f4b2721ed0b9b5' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.ticket.email.bcc","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<p>\\u041a\\u0442\\u043e-\\u0442\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u043b \\u043d\\u043e\\u0432\\u044b\\u0439 \\u0442\\u0438\\u043a\\u0435\\u0442 \\u0443 \\u0432\\u0430\\u0441 \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435: <a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>.\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\n<p><b>[[+createdby:userinfo=`fullname`]]<\\/b> ([[+createdby:userinfo=`email`]])<\\/p>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_email_bcc.tpl","content":"<p>\\u041a\\u0442\\u043e-\\u0442\\u043e \\u0441\\u043e\\u0437\\u0434\\u0430\\u043b \\u043d\\u043e\\u0432\\u044b\\u0439 \\u0442\\u0438\\u043a\\u0435\\u0442 \\u0443 \\u0432\\u0430\\u0441 \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435: <a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>.\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\n<p><b>[[+createdby:userinfo=`fullname`]]<\\/b> ([[+createdby:userinfo=`email`]])<\\/p>"}',
        'guid' => '5dce01cf8576aad505851519036ad05e',
        'native_key' => NULL,
        'signature' => '076d048b8e2a56adab375ba053177829',
      ),
      'fd167c289e7b212f2349b714d401a1e8' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.ticket.email.subscription","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<p>\\u0412 \\u0441\\u0435\\u043a\\u0446\\u0438\\u0438 \\"<a href=\\"[[~[[+section.id]]?scheme=`full`]]\\">[[+section.pagetitle]]<\\/a>\\", \\u043d\\u0430 \\u043a\\u043e\\u0442\\u043e\\u0440\\u0443\\u044e \\u0432\\u044b \\u043f\\u043e\\u0434\\u043f\\u0438\\u0441\\u0430\\u043d\\u044b, \\u0431\\u044b\\u043b \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d \\u043d\\u043e\\u0432\\u044b\\u0439 \\u0442\\u0438\\u043a\\u0435\\u0442: \\"<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\".\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\n<p>\\u0410\\u0432\\u0442\\u043e\\u0440: <b>[[+createdby:userinfo=`fullname`]]<\\/b><\\/p>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_email_subscription.tpl","content":"<p>\\u0412 \\u0441\\u0435\\u043a\\u0446\\u0438\\u0438 \\"<a href=\\"[[~[[+section.id]]?scheme=`full`]]\\">[[+section.pagetitle]]<\\/a>\\", \\u043d\\u0430 \\u043a\\u043e\\u0442\\u043e\\u0440\\u0443\\u044e \\u0432\\u044b \\u043f\\u043e\\u0434\\u043f\\u0438\\u0441\\u0430\\u043d\\u044b, \\u0431\\u044b\\u043b \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d \\u043d\\u043e\\u0432\\u044b\\u0439 \\u0442\\u0438\\u043a\\u0435\\u0442: \\"<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\".\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\n<p>\\u0410\\u0432\\u0442\\u043e\\u0440: <b>[[+createdby:userinfo=`fullname`]]<\\/b><\\/p>"}',
        'guid' => 'ff69a796882f27f4577762e1412d4517',
        'native_key' => NULL,
        'signature' => '05dfa4320f446f6bded85eea4137af43',
      ),
      '52ee03bfe2798b2daf1f5f35b574950c' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.form","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h4 id=\\"comment-new-link\\">\\n\\t<a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\n<\\/h4>\\n\\n<div id=\\"comment-form-placeholder\\">\\n\\t<form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\n\\t\\t<div id=\\"comment-preview-placeholder\\"><\\/div>\\n\\t\\t<input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"0\\" \\/>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-editor\\"><\\/label>\\n\\t\\t\\t<textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"form-actions\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t\\t<span class=\\"time\\"><\\/span>\\n\\t\\t<\\/div>\\n\\t<\\/form>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_form.tpl","content":"<h4 id=\\"comment-new-link\\">\\n\\t<a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\n<\\/h4>\\n\\n<div id=\\"comment-form-placeholder\\">\\n\\t<form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\n\\t\\t<div id=\\"comment-preview-placeholder\\"><\\/div>\\n\\t\\t<input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"0\\" \\/>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-editor\\"><\\/label>\\n\\t\\t\\t<textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"form-actions\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t\\t<span class=\\"time\\"><\\/span>\\n\\t\\t<\\/div>\\n\\t<\\/form>\\n<\\/div>"}',
        'guid' => '59eec51048c50f634c469641c561631f',
        'native_key' => NULL,
        'signature' => '8df6d62eeb262593fbecbd9fb393b369',
      ),
      'd1c194a409f3e6028ff3ef2e2c3003ef' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.form.guest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h4 id=\\"comment-new-link\\">\\n\\t<a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\n<\\/h4>\\n\\n<div id=\\"comment-form-placeholder\\">\\n\\t<form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\n\\t\\t<div id=\\"comment-preview-placeholder\\"><\\/div>\\n\\t\\t<input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"0\\" \\/>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-name\\">[[%ticket_comment_name]]<\\/label>\\n\\t\\t\\t<input type=\\"text\\" name=\\"name\\" value=\\"[[+name]]\\" id=\\"comment-name\\" class=\\"form-control\\" \\/>\\n\\t\\t\\t<span class=\\"error\\"><\\/span>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-email\\">[[%ticket_comment_email]]<\\/label>\\n\\t\\t\\t<input type=\\"text\\" name=\\"email\\" value=\\"[[+email]]\\" id=\\"comment-email\\" class=\\"form-control\\" \\/>\\n\\t\\t\\t<span class=\\"error\\"><\\/span>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-editor\\"><\\/label>\\n\\t\\t\\t<textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\n\\t\\t<\\/div>\\n\\n\\t\\t[[+captcha]]\\n\\n\\t\\t<div class=\\"form-actions\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t\\t<span class=\\"time\\"><\\/span>\\n\\t\\t<\\/div>\\n\\t<\\/form>\\n<\\/div>\\n\\n<!--tickets_captcha\\n<div class=\\"form-group\\">\\n\\t<label for=\\"comment-captcha\\" id=\\"comment-captcha\\">[[+captcha]]<\\/label>\\n\\t<input type=\\"text\\" name=\\"captcha\\" value=\\"\\" id=\\"comment-captcha\\" class=\\"form-control\\" \\/>\\n\\t<span class=\\"error\\"><\\/span>\\n<\\/div>\\n-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_form_guest.tpl","content":"<h4 id=\\"comment-new-link\\">\\n\\t<a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\n<\\/h4>\\n\\n<div id=\\"comment-form-placeholder\\">\\n\\t<form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\n\\t\\t<div id=\\"comment-preview-placeholder\\"><\\/div>\\n\\t\\t<input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\" \\/>\\n\\t\\t<input type=\\"hidden\\" name=\\"id\\" value=\\"0\\" \\/>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-name\\">[[%ticket_comment_name]]<\\/label>\\n\\t\\t\\t<input type=\\"text\\" name=\\"name\\" value=\\"[[+name]]\\" id=\\"comment-name\\" class=\\"form-control\\" \\/>\\n\\t\\t\\t<span class=\\"error\\"><\\/span>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-email\\">[[%ticket_comment_email]]<\\/label>\\n\\t\\t\\t<input type=\\"text\\" name=\\"email\\" value=\\"[[+email]]\\" id=\\"comment-email\\" class=\\"form-control\\" \\/>\\n\\t\\t\\t<span class=\\"error\\"><\\/span>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"form-group\\">\\n\\t\\t\\t<label for=\\"comment-editor\\"><\\/label>\\n\\t\\t\\t<textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\n\\t\\t<\\/div>\\n\\n\\t\\t[[+captcha]]\\n\\n\\t\\t<div class=\\"form-actions\\">\\n\\t\\t\\t<input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\" title=\\"Ctrl + Enter\\" \\/>\\n\\t\\t\\t<input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\" title=\\"Ctrl + Shift + Enter\\" \\/>\\n\\t\\t\\t<span class=\\"time\\"><\\/span>\\n\\t\\t<\\/div>\\n\\t<\\/form>\\n<\\/div>\\n\\n<!--tickets_captcha\\n<div class=\\"form-group\\">\\n\\t<label for=\\"comment-captcha\\" id=\\"comment-captcha\\">[[+captcha]]<\\/label>\\n\\t<input type=\\"text\\" name=\\"captcha\\" value=\\"\\" id=\\"comment-captcha\\" class=\\"form-control\\" \\/>\\n\\t<span class=\\"error\\"><\\/span>\\n<\\/div>\\n-->"}',
        'guid' => '24ca4e0eeca7ee910e16d69ac4576522',
        'native_key' => NULL,
        'signature' => '2585744db5d66bd48cd50ee020ffa96e',
      ),
      'eec40dff9ab5af0a56def299e40a1973' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.one.auth","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li class=\\"ticket-comment[[+comment_new]]\\" id=\\"comment-[[+id]]\\" data-parent=\\"[[+parent]]\\" data-newparent=\\"[[+new_parent]]\\" data-id=\\"[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body[[+guest]][[+bad]]\\">\\n\\t\\t<div class=\\"ticket-comment-header\\">\\n\\t\\t\\t<div class=\\"ticket-comment-dot-wrapper\\"><div class=\\"ticket-comment-dot\\"><\\/div><\\/div>\\n\\t\\t\\t<img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\" \\/>\\n\\t\\t\\t<span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\n\\t\\t\\t<span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\n\\t\\t\\t[[+has_parent]]\\n\\t\\t\\t<span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\n\\t\\t\\t\\t<span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\n\\t\\t\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\n\\t\\t\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\n\\t\\t\\t<\\/span>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"ticket-comment-text\\">\\n\\t\\t\\t[[+text]]\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\t<div class=\\"comment-reply\\">\\n\\t\\t<a href=\\"#\\" class=\\"reply\\">[[%ticket_comment_reply]]<\\/a>\\n\\t\\t[[+comment_edit_link]]\\n\\t<\\/div>\\n\\t<ol class=\\"comments-list\\">[[+children]]<\\/ol>\\n<\\/li>\\n<!--tickets_comment_edit_link <a href=\\"#\\" class=\\"edit\\">[[%ticket_comment_edit]]<\\/a>-->\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\n<!--tickets_comment_new  ticket-comment-new-->\\n<!--tickets_can_vote  active-->\\n<!--tickets_cant_vote  inactive-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_guest  ticket-comment-guest-->\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_one_auth.tpl","content":"<li class=\\"ticket-comment[[+comment_new]]\\" id=\\"comment-[[+id]]\\" data-parent=\\"[[+parent]]\\" data-newparent=\\"[[+new_parent]]\\" data-id=\\"[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body[[+guest]][[+bad]]\\">\\n\\t\\t<div class=\\"ticket-comment-header\\">\\n\\t\\t\\t<div class=\\"ticket-comment-dot-wrapper\\"><div class=\\"ticket-comment-dot\\"><\\/div><\\/div>\\n\\t\\t\\t<img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\" \\/>\\n\\t\\t\\t<span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\n\\t\\t\\t<span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\n\\t\\t\\t[[+has_parent]]\\n\\t\\t\\t<span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\n\\t\\t\\t\\t<span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\n\\t\\t\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\n\\t\\t\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\n\\t\\t\\t<\\/span>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"ticket-comment-text\\">\\n\\t\\t\\t[[+text]]\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\t<div class=\\"comment-reply\\">\\n\\t\\t<a href=\\"#\\" class=\\"reply\\">[[%ticket_comment_reply]]<\\/a>\\n\\t\\t[[+comment_edit_link]]\\n\\t<\\/div>\\n\\t<ol class=\\"comments-list\\">[[+children]]<\\/ol>\\n<\\/li>\\n<!--tickets_comment_edit_link <a href=\\"#\\" class=\\"edit\\">[[%ticket_comment_edit]]<\\/a>-->\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\n<!--tickets_comment_new  ticket-comment-new-->\\n<!--tickets_can_vote  active-->\\n<!--tickets_cant_vote  inactive-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_guest  ticket-comment-guest-->\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->\\n"}',
        'guid' => 'e62158fe451cdb0623ff4993c9b7e8ff',
        'native_key' => NULL,
        'signature' => 'dbf534afc7569b3f670a50adf7dfb897',
      ),
      '44e004f9152e11fd33d71f49f9911629' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.one.guest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body[[+bad]]\\">\\n\\t\\t<div class=\\"ticket-comment-header\\">\\n\\t\\t\\t<div class=\\"ticket-comment-dot-wrapper\\"><div class=\\"ticket-comment-dot\\"><\\/div><\\/div>\\n\\t\\t\\t<img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\" \\/>\\n\\t\\t\\t<span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\n\\n\\t\\t\\t[[+has_parent]]\\n\\t\\t\\t<span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\n\\n\\t\\t\\t<span class=\\"ticket-comment-rating inactive\\">\\n\\t\\t\\t\\t<span class=\\"rating[[+rating_positive]][[+rating_negative]]\\">\\n\\t\\t\\t\\t\\t[[+rating]]\\n\\t\\t\\t\\t<\\/span>\\n\\t\\t\\t\\t<span class=\\"plus\\" title=\\"[[%ticket_like]]\\">\\n\\t\\t\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\n\\t\\t\\t\\t<\\/span>\\n\\t\\t\\t\\t<span class=\\"minus\\" title=\\"[[%ticket_dislike]]\\">\\n\\t\\t\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\n\\t\\t\\t\\t<\\/span>\\n\\t\\t\\t<\\/span>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"ticket-comment-text\\">\\n\\t\\t\\t[[+text]]\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\t<ol class=\\"comments-list\\">[[+children]]<\\/ol>\\n<\\/li>\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_one_guest.tpl","content":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body[[+bad]]\\">\\n\\t\\t<div class=\\"ticket-comment-header\\">\\n\\t\\t\\t<div class=\\"ticket-comment-dot-wrapper\\"><div class=\\"ticket-comment-dot\\"><\\/div><\\/div>\\n\\t\\t\\t<img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\" \\/>\\n\\t\\t\\t<span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\n\\n\\t\\t\\t[[+has_parent]]\\n\\t\\t\\t<span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\n\\n\\t\\t\\t<span class=\\"ticket-comment-rating inactive\\">\\n\\t\\t\\t\\t<span class=\\"rating[[+rating_positive]][[+rating_negative]]\\">\\n\\t\\t\\t\\t\\t[[+rating]]\\n\\t\\t\\t\\t<\\/span>\\n\\t\\t\\t\\t<span class=\\"plus\\" title=\\"[[%ticket_like]]\\">\\n\\t\\t\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\n\\t\\t\\t\\t<\\/span>\\n\\t\\t\\t\\t<span class=\\"minus\\" title=\\"[[%ticket_dislike]]\\">\\n\\t\\t\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\n\\t\\t\\t\\t<\\/span>\\n\\t\\t\\t<\\/span>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"ticket-comment-text\\">\\n\\t\\t\\t[[+text]]\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\t<ol class=\\"comments-list\\">[[+children]]<\\/ol>\\n<\\/li>\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->"}',
        'guid' => 'ae9bb99c8a11063ff6d997b3a39b3d76',
        'native_key' => NULL,
        'signature' => '4fe6e1b227e556a369f03b42872113b7',
      ),
      'd427dab115fa0fe4636ed48b75292c4d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.one.deleted","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body alert alert-warning\\">\\n\\t\\t[[%ticket_comment_deleted_text]]\\n\\t<\\/div>\\n\\t<ol class=\\"comments-list\\">[[+children]]<\\/ol>\\n<\\/li>\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_one_deleted.tpl","content":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body alert alert-warning\\">\\n\\t\\t[[%ticket_comment_deleted_text]]\\n\\t<\\/div>\\n\\t<ol class=\\"comments-list\\">[[+children]]<\\/ol>\\n<\\/li>\\n"}',
        'guid' => '4835e327c77820dedc66124ce21a319d',
        'native_key' => NULL,
        'signature' => 'fd8606f53f3d7db2f92db69acfe55f2b',
      ),
      'ef179c17737a07fdd0342a85a6727b3a' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.wrapper","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"comments\\">\\n\\t[[+modx.user.id:isloggedin:is=`1`:then=`\\n\\t<span class=\\"comments-subscribe pull-right\\">\\n\\t\\t<label for=\\"comments-subscribe\\" class=\\"checkbox\\">\\n\\t\\t\\t<input type=\\"checkbox\\" name=\\"\\" id=\\"comments-subscribe\\" value=\\"1\\" [[+subscribed]] \\/> [[%ticket_comment_notify]]\\n\\t\\t<\\/label>\\n\\t<\\/span>\\n\\t`:else=``]]\\n\\n\\t<h3 class=\\"title\\">[[%comments]] (<span id=\\"comment-total\\">[[+total]]<\\/span>)<\\/h3>\\n\\n\\t<div id=\\"comments-wrapper\\">\\n\\t\\t<ol class=\\"comment-list\\" id=\\"comments\\">[[+comments]]<\\/ol>\\n\\t<\\/div>\\n\\n\\t<div id=\\"comments-tpanel\\">\\n\\t\\t<div id=\\"tpanel-refresh\\"><\\/div>\\n\\t\\t<div id=\\"tpanel-new\\"><\\/div>\\n\\t<\\/div>\\n<\\/div>\\n\\n<!--tickets_subscribed checked-->\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_wrapper.tpl","content":"<div class=\\"comments\\">\\n\\t[[+modx.user.id:isloggedin:is=`1`:then=`\\n\\t<span class=\\"comments-subscribe pull-right\\">\\n\\t\\t<label for=\\"comments-subscribe\\" class=\\"checkbox\\">\\n\\t\\t\\t<input type=\\"checkbox\\" name=\\"\\" id=\\"comments-subscribe\\" value=\\"1\\" [[+subscribed]] \\/> [[%ticket_comment_notify]]\\n\\t\\t<\\/label>\\n\\t<\\/span>\\n\\t`:else=``]]\\n\\n\\t<h3 class=\\"title\\">[[%comments]] (<span id=\\"comment-total\\">[[+total]]<\\/span>)<\\/h3>\\n\\n\\t<div id=\\"comments-wrapper\\">\\n\\t\\t<ol class=\\"comment-list\\" id=\\"comments\\">[[+comments]]<\\/ol>\\n\\t<\\/div>\\n\\n\\t<div id=\\"comments-tpanel\\">\\n\\t\\t<div id=\\"tpanel-refresh\\"><\\/div>\\n\\t\\t<div id=\\"tpanel-new\\"><\\/div>\\n\\t<\\/div>\\n<\\/div>\\n\\n<!--tickets_subscribed checked-->\\n"}',
        'guid' => 'b483278ad4f819153c3b5df027dd29e4',
        'native_key' => NULL,
        'signature' => '1de8ed931024d313cf36a73c61e8ee07',
      ),
      '4960b034b75e83ce9f8bd5ac74ffac57' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.login","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-comments alert alert-warning\\">\\n    <p>[[%ticket_comment_err_no_auth]]<\\/p>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_login.tpl","content":"<div class=\\"ticket-comments alert alert-warning\\">\\n    <p>[[%ticket_comment_err_no_auth]]<\\/p>\\n<\\/div>"}',
        'guid' => 'fb80bfcd7699102485a2ba36635f1370',
        'native_key' => NULL,
        'signature' => 'f50c080b495709af40f05ce32d7a0c31',
      ),
      'e8ac2c664f8ceff8701409ec2f31f07d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.latest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"tickets-latest-row[[+guest]]\\">\\n\\t<span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span class=\\"date\\">[[+date_ago]]<\\/span>\\n\\t<br\\/>\\n\\t<span class=\\"ticket\\">\\n\\t\\t<a href=\\"[[~[[+ticket.id]]]]#comment-[[+id]]\\">[[+ticket.pagetitle]]<\\/a>\\n\\t<\\/span>\\n\\t<nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\n<\\/div>\\n<!--tickets_guest  ticket-comment-guest-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_latest.tpl","content":"<div class=\\"tickets-latest-row[[+guest]]\\">\\n\\t<span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span class=\\"date\\">[[+date_ago]]<\\/span>\\n\\t<br\\/>\\n\\t<span class=\\"ticket\\">\\n\\t\\t<a href=\\"[[~[[+ticket.id]]]]#comment-[[+id]]\\">[[+ticket.pagetitle]]<\\/a>\\n\\t<\\/span>\\n\\t<nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\n<\\/div>\\n<!--tickets_guest  ticket-comment-guest-->"}',
        'guid' => 'e274923bdabd963e02670d70c1e49398',
        'native_key' => NULL,
        'signature' => 'db09f2b2f987d393f32b2d77dd2bb80d',
      ),
      '8d31c56dbf0b29bb6ab03fb81cdd47b1' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.owner","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043a \\u0432\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0443 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041e\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044c<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_owner.tpl","content":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043a \\u0432\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0443 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041e\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044c<\\/a>"}',
        'guid' => 'c40edd6ea6a57044ca71bf760b666051',
        'native_key' => NULL,
        'signature' => '6bd934b092c2e74d4a917dc982b6f714',
      ),
      '9ebaf3b05a77c374fbae4427b4ec7519' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.reply","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0442\\u0432\\u0435\\u0442\\u0438\\u043b \\u043d\\u0430 \\u0432\\u0430\\u0448 \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043a \\u0442\\u0438\\u043a\\u0435\\u0442\\u0443 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041e\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044c<\\/a>\\n<br\\/><br\\/>\\n\\u0422\\u0435\\u043a\\u0441\\u0442 \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u044f:\\n<pre>[[+parent_text]]<\\/pre>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_reply.tpl","content":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0442\\u0432\\u0435\\u0442\\u0438\\u043b \\u043d\\u0430 \\u0432\\u0430\\u0448 \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u043a \\u0442\\u0438\\u043a\\u0435\\u0442\\u0443 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041e\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044c<\\/a>\\n<br\\/><br\\/>\\n\\u0422\\u0435\\u043a\\u0441\\u0442 \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u044f:\\n<pre>[[+parent_text]]<\\/pre>"}',
        'guid' => '42be6058ff806d143641ae6269ddc97c',
        'native_key' => NULL,
        'signature' => '0ea36028cb4c4a2747eb2cdc070b048c',
      ),
      'e501cb2df99c6c2283690cfc71945bf4' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.subscription","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u0432 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0435, \\u043d\\u0430 \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0432\\u044b \\u043f\\u043e\\u0434\\u043f\\u0438\\u0441\\u0430\\u043d\\u044b - \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u0442\\u044c<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_subscription.tpl","content":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u0432 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0435, \\u043d\\u0430 \\u043a\\u043e\\u0442\\u043e\\u0440\\u044b\\u0439 \\u0432\\u044b \\u043f\\u043e\\u0434\\u043f\\u0438\\u0441\\u0430\\u043d\\u044b - \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u0442\\u044c<\\/a>"}',
        'guid' => 'eba54f98aa50452b77dfb6cc6bf18fe6',
        'native_key' => NULL,
        'signature' => 'b1b8496d12633c62105523bc06816773',
      ),
      'e2b8634ced7c19934f54fa1dc8c50d2a' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.bcc","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u0432 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0435 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u0442\\u044c<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_bcc.tpl","content":"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u0432 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0435 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\":\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">\\u041f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u0442\\u044c<\\/a>"}',
        'guid' => '73ba84e688842f2bfb471ee7ecc4c2f7',
        'native_key' => NULL,
        'signature' => '6b2bbf31ecc01ee10cf5ff32f9ffd110',
      ),
      'f0a030d8cd25373a8cf27f397886d308' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.unpublished","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<p>\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u0432 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0435 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\".<\\/p>\\n\\u0422\\u0435\\u043f\\u0435\\u0440\\u044c \\u0432\\u0430\\u043c \\u043d\\u0443\\u0436\\u043d\\u043e \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u0438\\u0442\\u044c \\u0435\\u0433\\u043e \\u0438 \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u0442\\u044c \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435:\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[+manager_url]]\\">\\u0412\\u0441\\u0435 \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0438<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_unpublished.tpl","content":"<p>\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c <b>[[+name]]<\\/b> \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0439 \\u0432 \\u0442\\u0438\\u043a\\u0435\\u0442\\u0435 \\"<a href=\\"[[~[[+resource]]?scheme=`full`]]\\">[[+pagetitle]]<\\/a>\\".<\\/p>\\n\\u0422\\u0435\\u043f\\u0435\\u0440\\u044c \\u0432\\u0430\\u043c \\u043d\\u0443\\u0436\\u043d\\u043e \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u0438\\u0442\\u044c \\u0435\\u0433\\u043e \\u0438 \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u0442\\u044c \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435:\\n<pre>[[+text]]<\\/pre>\\n<br\\/><br\\/>\\n<a href=\\"[[+manager_url]]\\">\\u0412\\u0441\\u0435 \\u043a\\u043e\\u043c\\u043c\\u0435\\u043d\\u0442\\u0430\\u0440\\u0438\\u0438<\\/a>"}',
        'guid' => '17b8a9177409c07123a2fba973d0aa8b',
        'native_key' => NULL,
        'signature' => 'cc387a17bbc9ef13b66426ce16b0bb9a',
      ),
      '56c07e34afbdd7c1f33faabd704ada41' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.list.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-comment-row ticket-comment\\" id=\\"comment-[[+id]]\\" data-id=\\"[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body[[+guest]]\\">\\n\\t\\t<div class=\\"ticket-comment-header\\">\\n\\t\\t\\t<img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\" \\/>\\n\\t\\t\\t<span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\n\\t\\t\\t<span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\n\\n\\t\\t\\t<span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\n\\t\\t\\t\\t<span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\n\\t\\t\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\n\\t\\t\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\n\\t\\t\\t<\\/span>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"ticket-comment-text\\">\\n\\t\\t\\t[[+text]]\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\n\\t<a href=\\"[[~[[+section.id]]]]\\" class=\\"ticket-comment-section\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a> &rarr;\\n\\t<a href=\\"[[~[[+ticket.id]]]]\\" class=\\"ticket-comment-ticket\\">[[+ticket.pagetitle]]<\\/a> &nbsp;\\n\\t<span class=\\"ticket-comment-comments\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/span>\\n<\\/div>\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\n<!--tickets_can_vote  active-->\\n<!--tickets_cant_vote  inactive-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_guest  ticket-comment-guest-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_list_row.tpl","content":"<div class=\\"ticket-comment-row ticket-comment\\" id=\\"comment-[[+id]]\\" data-id=\\"[[+id]]\\">\\n\\t<div class=\\"ticket-comment-body[[+guest]]\\">\\n\\t\\t<div class=\\"ticket-comment-header\\">\\n\\t\\t\\t<img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\" \\/>\\n\\t\\t\\t<span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\n\\t\\t\\t<span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\n\\t\\t\\t<span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\n\\n\\t\\t\\t<span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\n\\t\\t\\t\\t<span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\n\\t\\t\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\n\\t\\t\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\n\\t\\t\\t<\\/span>\\n\\t\\t<\\/div>\\n\\t\\t<div class=\\"ticket-comment-text\\">\\n\\t\\t\\t[[+text]]\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\n\\t<a href=\\"[[~[[+section.id]]]]\\" class=\\"ticket-comment-section\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a> &rarr;\\n\\t<a href=\\"[[~[[+ticket.id]]]]\\" class=\\"ticket-comment-ticket\\">[[+ticket.pagetitle]]<\\/a> &nbsp;\\n\\t<span class=\\"ticket-comment-comments\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/span>\\n<\\/div>\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\n<!--tickets_can_vote  active-->\\n<!--tickets_cant_vote  inactive-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_guest  ticket-comment-guest-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->"}',
        'guid' => '483af4b599a14dc23f0063e122403d50',
        'native_key' => NULL,
        'signature' => 'f9e781780c2b7e01fd6e51c201c40d81',
      ),
      'd2caac8443eb667c269e45b1f6c8694f' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.list.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"tickets-row\\">\\n    <h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\n\\t<div class=\\"content\\">\\n\\t\\t[[+introtext]]<br\\/>\\n\\t\\t<a href=\\"[[~[[+id]]]]#cut\\" class=\\"btn btn-default ticket-read-more\\">[[%ticket_read_more]]<\\/a>\\n\\t<\\/div>\\n\\t<div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\n\\t\\t<span class=\\"col-md-5\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\n\\t\\t\\t&nbsp;&nbsp;\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\n\\t\\t<\\/span>\\n\\t\\t<span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a><\\/span>\\n\\t\\t<span class=\\"col-md-3\\">\\n\\t\\t\\t<span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\n\\t\\t\\t&nbsp;&nbsp;\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\n\\t\\t\\t&nbsp;&nbsp;\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]  [[+new_comments]]\\n\\t\\t<\\/span>\\n\\t\\t<span class=\\"col-md-2 pull-right ticket-rating[[+active]][[+inactive]]\\">\\n\\t\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\n\\t\\t\\t[[+can_vote]][[+cant_vote]]\\n\\t\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\n\\t\\t<\\/span>\\n\\t<\\/div>\\n<\\/div>\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\n<!--tickets_new_comments <span class=\\"ticket-new-comments\\">+[[+new_comments]]<\\/span>-->\\n<!--tickets_active  active-->\\n<!--tickets_inactive  inactive-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_list_row.tpl","content":"<div class=\\"tickets-row\\">\\n    <h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\n\\t<div class=\\"content\\">\\n\\t\\t[[+introtext]]<br\\/>\\n\\t\\t<a href=\\"[[~[[+id]]]]#cut\\" class=\\"btn btn-default ticket-read-more\\">[[%ticket_read_more]]<\\/a>\\n\\t<\\/div>\\n\\t<div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\n\\t\\t<span class=\\"col-md-5\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\n\\t\\t\\t&nbsp;&nbsp;\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\n\\t\\t<\\/span>\\n\\t\\t<span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a><\\/span>\\n\\t\\t<span class=\\"col-md-3\\">\\n\\t\\t\\t<span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\n\\t\\t\\t&nbsp;&nbsp;\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\n\\t\\t\\t&nbsp;&nbsp;\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]  [[+new_comments]]\\n\\t\\t<\\/span>\\n\\t\\t<span class=\\"col-md-2 pull-right ticket-rating[[+active]][[+inactive]]\\">\\n\\t\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\n\\t\\t\\t[[+can_vote]][[+cant_vote]]\\n\\t\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\n\\t\\t<\\/span>\\n\\t<\\/div>\\n<\\/div>\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\n<!--tickets_new_comments <span class=\\"ticket-new-comments\\">+[[+new_comments]]<\\/span>-->\\n<!--tickets_active  active-->\\n<!--tickets_inactive  inactive-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->"}',
        'guid' => '55b8ef830eaf21066b0790b5082c7fe6',
        'native_key' => NULL,
        'signature' => '67d0e84485c0c0308fddb2c0216f9a0e',
      ),
      '839e96ee40429ab1a96022b662568d36' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.sections.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"section-row\\">\\r\\n\\t<h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\r\\n\\t<div class=\\"content\\">\\r\\n\\t\\t[[+introtext]]\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"section-meta row\\">\\r\\n\\t\\t<div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-th-list\\"><\\/i> [[+tickets]]<\\/div>\\r\\n\\t\\t<div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]<\\/div>\\r\\n\\t\\t<div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/div>\\r\\n\\t<\\/div>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_sections_row.tpl","content":"<div class=\\"section-row\\">\\r\\n\\t<h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\r\\n\\t<div class=\\"content\\">\\r\\n\\t\\t[[+introtext]]\\r\\n\\t<\\/div>\\r\\n\\t<div class=\\"section-meta row\\">\\r\\n\\t\\t<div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-th-list\\"><\\/i> [[+tickets]]<\\/div>\\r\\n\\t\\t<div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]<\\/div>\\r\\n\\t\\t<div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/div>\\r\\n\\t<\\/div>\\r\\n<\\/div>"}',
        'guid' => 'df2f7fb209f0c44bc7dcfd1327775037',
        'native_key' => NULL,
        'signature' => '8240e192c5b86dcb41c08840a8b73a43',
      ),
      'b86d0a753e09d9fbc1d5281941e9696f' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.sections.wrapper","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[+modx.user.id:isloggedin:is=`1`:then=`\\n<span class=\\"tickets-subscribe pull-right\\">\\n\\t<label for=\\"tickets-subscribe\\" class=\\"checkbox\\">\\n\\t\\t<input type=\\"checkbox\\" name=\\"\\" id=\\"tickets-subscribe\\" value=\\"1\\" data-id=\\"[[*id]]\\" [[+subscribed:notempty=`checked`]] \\/> [[%tickets_section_notify]]\\n\\t<\\/label>\\n<\\/span>\\n`:else=``]]\\n\\n<div class=\\"tickets-list\\">\\n\\t[[+output]]\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_sections_wrapper.tpl","content":"[[+modx.user.id:isloggedin:is=`1`:then=`\\n<span class=\\"tickets-subscribe pull-right\\">\\n\\t<label for=\\"tickets-subscribe\\" class=\\"checkbox\\">\\n\\t\\t<input type=\\"checkbox\\" name=\\"\\" id=\\"tickets-subscribe\\" value=\\"1\\" data-id=\\"[[*id]]\\" [[+subscribed:notempty=`checked`]] \\/> [[%tickets_section_notify]]\\n\\t<\\/label>\\n<\\/span>\\n`:else=``]]\\n\\n<div class=\\"tickets-list\\">\\n\\t[[+output]]\\n<\\/div>"}',
        'guid' => 'be5b874836e7f0194da6679be92d3b95',
        'native_key' => NULL,
        'signature' => '0c99757e2a22c5df65be635932fe8ca1',
      ),
      'cbd32079a3788c169aeea7b8bd8911f0' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.meta","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\n\\t<span class=\\"col-md-5\\">\\n\\t\\t<i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\n\\t\\t&nbsp;&nbsp;\\n\\t\\t<i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\n\\t<\\/span>\\n\\t<span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a><\\/span>\\n\\t<span class=\\"col-md-2\\">\\n\\t\\t<span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\n\\t\\t&nbsp;&nbsp;\\n\\t\\t<i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\n\\t<\\/span>\\n\\t<span class=\\"col-md-2 pull-right ticket-rating[[+active]][[+inactive]]\\">\\n\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\n\\t\\t<\\/span>\\n\\t\\t[[+can_vote]][[+cant_vote]]\\n\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\n\\t\\t<\\/span>\\n\\t<\\/span>\\n<\\/div>\\n[[+has_files]]\\n\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\n<!--tickets_active  active-->\\n<!--tickets_inactive  inactive-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_has_files\\n<ul class=\\"ticket-files\\">\\n\\t<strong>[[%ticket_uploaded_files]]:<\\/strong>\\n\\t[[+files]]\\n<\\/ul>-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_meta.tpl","content":"<div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\n\\t<span class=\\"col-md-5\\">\\n\\t\\t<i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\n\\t\\t&nbsp;&nbsp;\\n\\t\\t<i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\n\\t<\\/span>\\n\\t<span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a><\\/span>\\n\\t<span class=\\"col-md-2\\">\\n\\t\\t<span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\n\\t\\t&nbsp;&nbsp;\\n\\t\\t<i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\n\\t<\\/span>\\n\\t<span class=\\"col-md-2 pull-right ticket-rating[[+active]][[+inactive]]\\">\\n\\t\\t<span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\n\\t\\t<\\/span>\\n\\t\\t[[+can_vote]][[+cant_vote]]\\n\\t\\t<span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\n\\t\\t<\\/span>\\n\\t<\\/span>\\n<\\/div>\\n[[+has_files]]\\n\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\n<!--tickets_active  active-->\\n<!--tickets_inactive  inactive-->\\n<!--tickets_voted_plus  voted-->\\n<!--tickets_voted_minus  voted-->\\n<!--tickets_rating_positive  positive-->\\n<!--tickets_rating_negative  negative-->\\n<!--tickets_has_files\\n<ul class=\\"ticket-files\\">\\n\\t<strong>[[%ticket_uploaded_files]]:<\\/strong>\\n\\t[[+files]]\\n<\\/ul>-->\\n<!--tickets_can_star  active-->\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->"}',
        'guid' => '262b64feb623e254d59e879016859502',
        'native_key' => NULL,
        'signature' => 'f1cc1a8f397d239b38320cde07a4af83',
      ),
      '2263e20aabe0391b3c663aa7e6c94919' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.meta.file","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li>\\n\\t<a href=\\"[[+url]]\\" target=\\"_blank\\">[[+name]]<\\/a> [[+size]] kb\\n<\\/li>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_meta_file.tpl","content":"<li>\\n\\t<a href=\\"[[+url]]\\" target=\\"_blank\\">[[+name]]<\\/a> [[+size]] kb\\n<\\/li>"}',
        'guid' => '76b80cf2e9c8efc6cf433ca5a6433fcf',
        'native_key' => NULL,
        'signature' => 'ef423b0aeee03ddbbe7f9cd8696a93c1',
      ),
    ),
    'Snippets' => 
    array (
      'd18c5d1a8b978ddfd1ccd7e52e7dee62' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketForm","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\nif (!$Tickets->authenticated) {\\n\\treturn $modx->lexicon(\'ticket_err_no_auth\');\\n}\\n\\n$tplSectionRow = $modx->getOption(\'tplSectionRow\', $scriptProperties, \'tpl.Tickets.sections.row\');\\n$tplFormCreate = $modx->getOption(\'tplFormCreate\', $scriptProperties, \'tpl.Tickets.form.create\');\\n$tplFormUpdate = $modx->getOption(\'tplFormUpdate\', $scriptProperties, \'tpl.Tickets.form.update\');\\n$tplFiles = $modx->getOption(\'tplFiles\', $scriptProperties, \'tpl.Tickets.form.files\');\\n$tplFile = $Tickets->config[\'tplFile\'] = $modx->getOption(\'tplFile\', $scriptProperties, \'tpl.Tickets.form.file\', true);\\n$tplImage = $Tickets->config[\'tplImage\'] = $modx->getOption(\'tplImage\', $scriptProperties, \'tpl.Tickets.form.image\', true);\\nif (empty($source)) {\\n\\t$source = $Tickets->config[\'source\'] = $modx->getOption(\'tickets.source_default\', null, $modx->getOption(\'default_media_source\'));\\n}\\n$tid = !empty($_REQUEST[\'tid\'])\\n\\t? (int)$_REQUEST[\'tid\']\\n\\t: 0;\\n$parent = !empty($_REQUEST[\'parent\'])\\n\\t? $_REQUEST[\'parent\']\\n\\t: \'\';\\n$data = array();\\n\\n\\/\\/ Update of ticket\\nif (!empty($tid)) {\\n\\t$tplWrapper = $tplFormUpdate;\\n\\t\\/* @var Ticket $ticket *\\/\\n\\tif ($ticket = $modx->getObject(\'Ticket\', array(\'class_key\' => \'Ticket\', \'id\' => $tid))) {\\n\\t\\tif ($ticket->get(\'createdby\') != $modx->user->id && !$modx->hasPermission(\'edit_document\')) {\\n\\t\\t\\treturn $modx->lexicon(\'ticket_err_wrong_user\');\\n\\t\\t}\\n\\t\\t$charset = $modx->getOption(\'modx_charset\');\\n\\t\\t$allowedFields = array_map(\'trim\', explode(\',\', $scriptProperties[\'allowedFields\']));\\n\\t\\t$allowedFields = array_unique(array_merge($allowedFields, array(\'parent\', \'pagetitle\', \'content\')));\\n\\n\\t\\t$fields = array_keys($modx->getFieldMeta(\'Ticket\'));\\n\\t\\tforeach ($allowedFields as $field) {\\n\\t\\t\\t$value = in_array($field, $fields)\\n\\t\\t\\t\\t? $ticket->get($field)\\n\\t\\t\\t\\t: $ticket->getTVValue($field);\\n\\t\\t\\tif (is_string($value)) {\\n\\t\\t\\t\\t$value = html_entity_decode($value, ENT_QUOTES, $charset);\\n\\t\\t\\t\\t$value = str_replace(array(\'[^\', \'^]\', \'[\', \']\'), array(\'&#91;^\', \'^&#93;\', \'*{*{*{*{*{*\', \'*}*}*}*}*}*\'), $value);\\n\\t\\t\\t\\t$value = htmlentities($value, ENT_QUOTES, $charset);\\n\\t\\t\\t}\\n\\t\\t\\t$data[$field] = $value;\\n\\t\\t}\\n\\t\\t$data[\'id\'] = $ticket->id;\\n\\t\\t$data[\'published\'] = $ticket->published;\\n\\t\\tif (empty($parent)) {\\n\\t\\t\\t$parent = $ticket->get(\'parent\');\\n\\t\\t}\\n\\t}\\n\\telse {\\n\\t\\treturn $modx->lexicon(\'ticket_err_id\', array(\'id\' => $tid));\\n\\t}\\n}\\nelse {\\n\\t$tplWrapper = $tplFormCreate;\\n}\\n\\n\\/\\/ Get available sections for ticket create\\n$data[\'sections\'] = \'\';\\n\\/** @var modProcessorResponse $response *\\/\\n$response = $Tickets->runProcessor(\'web\\/section\\/getlist\', array(\\n\\t\'parents\' => $scriptProperties[\'parents\'],\\n\\t\'resources\' => $scriptProperties[\'resources\'],\\n\\t\'permissions\' => $scriptProperties[\'permissions\'],\\n\\t\'sortby\' => !empty($scriptProperties[\'sortby\'])\\n\\t\\t? $scriptProperties[\'sortby\']\\n\\t\\t: \'pagetitle\',\\n\\t\'sortdir\' => !empty($scriptProperties[\'sortdir\'])\\n\\t\\t? $scriptProperties[\'sortdir\']\\n\\t\\t: \'asc\',\\n\\t\'depth\' => isset($scriptProperties[\'depth\'])\\n\\t\\t? $scriptProperties[\'depth\']\\n\\t\\t: 0,\\n\\t\'context\' => !empty($scriptProperties[\'context\'])\\n\\t\\t? $scriptProperties[\'context\']\\n\\t\\t: $modx->context->key,\\n\\t\'limit\' => 0,\\n));\\n$response = $modx->fromJSON($response->getResponse());\\n\\nif (!empty($response[\'results\'])) {\\n\\t$Tickets->config[\'sections\'] = array();\\n\\tforeach ($response[\'results\'] as $v) {\\n\\t\\t$v[\'selected\'] = $parent == $v[\'id\'] || $parent == $v[\'alias\']\\n\\t\\t\\t? \'selected\'\\n\\t\\t\\t: \'\';\\n\\t\\t$data[\'sections\'] .= $Tickets->getChunk($tplSectionRow, $v);\\n\\t\\t$Tickets->config[\'sections\'][] = $v[\'id\'];\\n\\t}\\n}\\n\\nif (!empty($allowFiles)) {\\n\\t$q = $modx->newQuery(\'TicketFile\');\\n\\t$q->where(array(\'class\' => \'Ticket\'));\\n\\t$q->andCondition(array(\'parent\' => 0, \'createdby\' => $modx->user->id), null, 1);\\n\\tif (!empty($tid)) {\\n\\t\\t$q->orCondition(array(\'parent\' => $tid), null, 1);\\n\\t}\\n\\t$q->sortby(\'createdon\', \'ASC\');\\n\\t$collection = $modx->getIterator(\'TicketFile\', $q);\\n\\t$files = \'\';\\n\\t\\/** @var TicketFile $item *\\/\\n\\tforeach ($collection as $item) {\\n\\t\\tif ($item->get(\'deleted\') && !$item->get(\'parent\')) {\\n\\t\\t\\t$item->remove();\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$item = $item->toArray();\\n\\t\\t\\t$item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\n\\t\\t\\t$item[\'new\'] = empty($item[\'parent\']);\\n\\t\\t\\t$tpl = $item[\'type\'] == \'image\'\\n\\t\\t\\t\\t? $tplImage\\n\\t\\t\\t\\t: $tplFile;\\n\\t\\t\\t$files .= $Tickets->getChunk($tpl, $item);\\n\\t\\t}\\n\\t}\\n\\t$data[\'files\'] = $Tickets->getChunk($tplFiles, array(\\n\\t\\t\'files\' => $files,\\n\\t));\\n\\t\\/** @var modMediaSource $source *\\/\\n\\tif ($source = $modx->getObject(\'sources.modMediaSource\', $source)) {\\n\\t\\t$properties = $source->getPropertyList();\\n\\t\\t$config = array(\\n\\t\\t\\t\'size\' => !empty($properties[\'maxUploadSize\'])\\n\\t\\t\\t\\t? $properties[\'maxUploadSize\']\\n\\t\\t\\t\\t: 3145728,\\n\\t\\t\\t\'height\' => !empty($properties[\'maxUploadHeight\'])\\n\\t\\t\\t\\t? $properties[\'maxUploadHeight\']\\n\\t\\t\\t\\t: 1080,\\n\\t\\t\\t\'width\' => !empty($properties[\'maxUploadWidth\'])\\n\\t\\t\\t\\t? $properties[\'maxUploadWidth\']\\n\\t\\t\\t\\t: 1920,\\n\\t\\t\\t\'extensions\' => !empty($properties[\'allowedFileTypes\'])\\n\\t\\t\\t\\t? $properties[\'allowedFileTypes\']\\n\\t\\t\\t\\t: \'jpg,jpeg,png,gif\'\\n\\t\\t);\\n\\t\\t$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.source=\' . $modx->toJSON($config) . \'<\\/script>\', true);\\n\\t}\\n\\t$modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/plupload.full.min.js\');\\n\\t$modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/files.js\');\\n\\n\\t$lang = $modx->getOption(\'cultureKey\');\\n\\tif ($lang != \'en\' && file_exists($Tickets->config[\'jsPath\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\')) {\\n\\t\\t$modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\');\\n\\t}\\n}\\n\\n$output = $Tickets->getChunk($tplWrapper, $data);\\n$key = md5($modx->toJSON($Tickets->config));\\n$_SESSION[\'TicketForm\'][$key] = $Tickets->config;\\n$output = str_ireplace(\'<\\/form>\', \\"\\\\n<input type=\\\\\\"hidden\\\\\\" name=\\\\\\"form_key\\\\\\" value=\\\\\\"{$key}\\\\\\" class=\\\\\\"disable-sisyphus\\\\\\" \\/>\\\\n<\\/form>\\", $output);\\n\\nreturn $output;","locked":0,"properties":"a:21:{s:13:\\"tplFormCreate\\";a:7:{s:4:\\"name\\";s:13:\\"tplFormCreate\\";s:4:\\"desc\\";s:26:\\"tickets_prop_tplFormCreate\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:23:\\"tpl.Tickets.form.create\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"tplFormUpdate\\";a:7:{s:4:\\"name\\";s:13:\\"tplFormUpdate\\";s:4:\\"desc\\";s:26:\\"tickets_prop_tplFormUpdate\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:23:\\"tpl.Tickets.form.update\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplPreview\\";a:7:{s:4:\\"name\\";s:10:\\"tplPreview\\";s:4:\\"desc\\";s:23:\\"tickets_prop_tplPreview\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"tpl.Tickets.form.preview\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"tplSectionRow\\";a:7:{s:4:\\"name\\";s:13:\\"tplSectionRow\\";s:4:\\"desc\\";s:26:\\"tickets_prop_tplSectionRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:69:\\"@INLINE <option value=\\"[[+id]]\\" [[+selected]]>[[+pagetitle]]<\\/option>\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplTicketEmailBcc\\";a:7:{s:4:\\"name\\";s:17:\\"tplTicketEmailBcc\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplTicketEmailBcc\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.Tickets.ticket.email.bcc\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:26:\\"tplTicketEmailSubscription\\";a:7:{s:4:\\"name\\";s:26:\\"tplTicketEmailSubscription\\";s:4:\\"desc\\";s:39:\\"tickets_prop_tplTicketEmailSubscription\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:37:\\"tpl.Tickets.ticket.email.subscription\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"allowedFields\\";a:7:{s:4:\\"name\\";s:13:\\"allowedFields\\";s:4:\\"desc\\";s:26:\\"tickets_prop_allowedFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"parent,pagetitle,content\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"requiredFields\\";a:7:{s:4:\\"name\\";s:14:\\"requiredFields\\";s:4:\\"desc\\";s:27:\\"tickets_prop_requiredFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"parent,pagetitle,content\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"bypassFields\\";a:7:{s:4:\\"name\\";s:12:\\"bypassFields\\";s:4:\\"desc\\";s:25:\\"tickets_prop_bypassFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:19:\\"redirectUnpublished\\";a:7:{s:4:\\"name\\";s:19:\\"redirectUnpublished\\";s:4:\\"desc\\";s:32:\\"tickets_prop_redirectUnpublished\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:29:\\"tickets_prop_sections_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:31:\\"tickets_prop_sections_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"permissions\\";a:7:{s:4:\\"name\\";s:11:\\"permissions\\";s:4:\\"desc\\";s:33:\\"tickets_prop_sections_permissions\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"section_add_children\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:28:\\"tickets_prop_sections_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"pagetitle\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:29:\\"tickets_prop_sections_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:29:\\"tickets_prop_sections_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"allowFiles\\";a:7:{s:4:\\"name\\";s:10:\\"allowFiles\\";s:4:\\"desc\\";s:23:\\"tickets_prop_allowFiles\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"source\\";a:7:{s:4:\\"name\\";s:6:\\"source\\";s:4:\\"desc\\";s:19:\\"tickets_prop_source\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplFiles\\";a:7:{s:4:\\"name\\";s:8:\\"tplFiles\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tplFiles\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:22:\\"tpl.Tickets.form.files\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplFile\\";a:7:{s:4:\\"name\\";s:7:\\"tplFile\\";s:4:\\"desc\\";s:20:\\"tickets_prop_tplFile\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:21:\\"tpl.Tickets.form.file\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplImage\\";a:7:{s:4:\\"name\\";s:8:\\"tplImage\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tplImage\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:22:\\"tpl.Tickets.form.image\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.ticket_form.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\nif (!$Tickets->authenticated) {\\n\\treturn $modx->lexicon(\'ticket_err_no_auth\');\\n}\\n\\n$tplSectionRow = $modx->getOption(\'tplSectionRow\', $scriptProperties, \'tpl.Tickets.sections.row\');\\n$tplFormCreate = $modx->getOption(\'tplFormCreate\', $scriptProperties, \'tpl.Tickets.form.create\');\\n$tplFormUpdate = $modx->getOption(\'tplFormUpdate\', $scriptProperties, \'tpl.Tickets.form.update\');\\n$tplFiles = $modx->getOption(\'tplFiles\', $scriptProperties, \'tpl.Tickets.form.files\');\\n$tplFile = $Tickets->config[\'tplFile\'] = $modx->getOption(\'tplFile\', $scriptProperties, \'tpl.Tickets.form.file\', true);\\n$tplImage = $Tickets->config[\'tplImage\'] = $modx->getOption(\'tplImage\', $scriptProperties, \'tpl.Tickets.form.image\', true);\\nif (empty($source)) {\\n\\t$source = $Tickets->config[\'source\'] = $modx->getOption(\'tickets.source_default\', null, $modx->getOption(\'default_media_source\'));\\n}\\n$tid = !empty($_REQUEST[\'tid\'])\\n\\t? (int)$_REQUEST[\'tid\']\\n\\t: 0;\\n$parent = !empty($_REQUEST[\'parent\'])\\n\\t? $_REQUEST[\'parent\']\\n\\t: \'\';\\n$data = array();\\n\\n\\/\\/ Update of ticket\\nif (!empty($tid)) {\\n\\t$tplWrapper = $tplFormUpdate;\\n\\t\\/* @var Ticket $ticket *\\/\\n\\tif ($ticket = $modx->getObject(\'Ticket\', array(\'class_key\' => \'Ticket\', \'id\' => $tid))) {\\n\\t\\tif ($ticket->get(\'createdby\') != $modx->user->id && !$modx->hasPermission(\'edit_document\')) {\\n\\t\\t\\treturn $modx->lexicon(\'ticket_err_wrong_user\');\\n\\t\\t}\\n\\t\\t$charset = $modx->getOption(\'modx_charset\');\\n\\t\\t$allowedFields = array_map(\'trim\', explode(\',\', $scriptProperties[\'allowedFields\']));\\n\\t\\t$allowedFields = array_unique(array_merge($allowedFields, array(\'parent\', \'pagetitle\', \'content\')));\\n\\n\\t\\t$fields = array_keys($modx->getFieldMeta(\'Ticket\'));\\n\\t\\tforeach ($allowedFields as $field) {\\n\\t\\t\\t$value = in_array($field, $fields)\\n\\t\\t\\t\\t? $ticket->get($field)\\n\\t\\t\\t\\t: $ticket->getTVValue($field);\\n\\t\\t\\tif (is_string($value)) {\\n\\t\\t\\t\\t$value = html_entity_decode($value, ENT_QUOTES, $charset);\\n\\t\\t\\t\\t$value = str_replace(array(\'[^\', \'^]\', \'[\', \']\'), array(\'&#91;^\', \'^&#93;\', \'*{*{*{*{*{*\', \'*}*}*}*}*}*\'), $value);\\n\\t\\t\\t\\t$value = htmlentities($value, ENT_QUOTES, $charset);\\n\\t\\t\\t}\\n\\t\\t\\t$data[$field] = $value;\\n\\t\\t}\\n\\t\\t$data[\'id\'] = $ticket->id;\\n\\t\\t$data[\'published\'] = $ticket->published;\\n\\t\\tif (empty($parent)) {\\n\\t\\t\\t$parent = $ticket->get(\'parent\');\\n\\t\\t}\\n\\t}\\n\\telse {\\n\\t\\treturn $modx->lexicon(\'ticket_err_id\', array(\'id\' => $tid));\\n\\t}\\n}\\nelse {\\n\\t$tplWrapper = $tplFormCreate;\\n}\\n\\n\\/\\/ Get available sections for ticket create\\n$data[\'sections\'] = \'\';\\n\\/** @var modProcessorResponse $response *\\/\\n$response = $Tickets->runProcessor(\'web\\/section\\/getlist\', array(\\n\\t\'parents\' => $scriptProperties[\'parents\'],\\n\\t\'resources\' => $scriptProperties[\'resources\'],\\n\\t\'permissions\' => $scriptProperties[\'permissions\'],\\n\\t\'sortby\' => !empty($scriptProperties[\'sortby\'])\\n\\t\\t? $scriptProperties[\'sortby\']\\n\\t\\t: \'pagetitle\',\\n\\t\'sortdir\' => !empty($scriptProperties[\'sortdir\'])\\n\\t\\t? $scriptProperties[\'sortdir\']\\n\\t\\t: \'asc\',\\n\\t\'depth\' => isset($scriptProperties[\'depth\'])\\n\\t\\t? $scriptProperties[\'depth\']\\n\\t\\t: 0,\\n\\t\'context\' => !empty($scriptProperties[\'context\'])\\n\\t\\t? $scriptProperties[\'context\']\\n\\t\\t: $modx->context->key,\\n\\t\'limit\' => 0,\\n));\\n$response = $modx->fromJSON($response->getResponse());\\n\\nif (!empty($response[\'results\'])) {\\n\\t$Tickets->config[\'sections\'] = array();\\n\\tforeach ($response[\'results\'] as $v) {\\n\\t\\t$v[\'selected\'] = $parent == $v[\'id\'] || $parent == $v[\'alias\']\\n\\t\\t\\t? \'selected\'\\n\\t\\t\\t: \'\';\\n\\t\\t$data[\'sections\'] .= $Tickets->getChunk($tplSectionRow, $v);\\n\\t\\t$Tickets->config[\'sections\'][] = $v[\'id\'];\\n\\t}\\n}\\n\\nif (!empty($allowFiles)) {\\n\\t$q = $modx->newQuery(\'TicketFile\');\\n\\t$q->where(array(\'class\' => \'Ticket\'));\\n\\t$q->andCondition(array(\'parent\' => 0, \'createdby\' => $modx->user->id), null, 1);\\n\\tif (!empty($tid)) {\\n\\t\\t$q->orCondition(array(\'parent\' => $tid), null, 1);\\n\\t}\\n\\t$q->sortby(\'createdon\', \'ASC\');\\n\\t$collection = $modx->getIterator(\'TicketFile\', $q);\\n\\t$files = \'\';\\n\\t\\/** @var TicketFile $item *\\/\\n\\tforeach ($collection as $item) {\\n\\t\\tif ($item->get(\'deleted\') && !$item->get(\'parent\')) {\\n\\t\\t\\t$item->remove();\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$item = $item->toArray();\\n\\t\\t\\t$item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\n\\t\\t\\t$item[\'new\'] = empty($item[\'parent\']);\\n\\t\\t\\t$tpl = $item[\'type\'] == \'image\'\\n\\t\\t\\t\\t? $tplImage\\n\\t\\t\\t\\t: $tplFile;\\n\\t\\t\\t$files .= $Tickets->getChunk($tpl, $item);\\n\\t\\t}\\n\\t}\\n\\t$data[\'files\'] = $Tickets->getChunk($tplFiles, array(\\n\\t\\t\'files\' => $files,\\n\\t));\\n\\t\\/** @var modMediaSource $source *\\/\\n\\tif ($source = $modx->getObject(\'sources.modMediaSource\', $source)) {\\n\\t\\t$properties = $source->getPropertyList();\\n\\t\\t$config = array(\\n\\t\\t\\t\'size\' => !empty($properties[\'maxUploadSize\'])\\n\\t\\t\\t\\t? $properties[\'maxUploadSize\']\\n\\t\\t\\t\\t: 3145728,\\n\\t\\t\\t\'height\' => !empty($properties[\'maxUploadHeight\'])\\n\\t\\t\\t\\t? $properties[\'maxUploadHeight\']\\n\\t\\t\\t\\t: 1080,\\n\\t\\t\\t\'width\' => !empty($properties[\'maxUploadWidth\'])\\n\\t\\t\\t\\t? $properties[\'maxUploadWidth\']\\n\\t\\t\\t\\t: 1920,\\n\\t\\t\\t\'extensions\' => !empty($properties[\'allowedFileTypes\'])\\n\\t\\t\\t\\t? $properties[\'allowedFileTypes\']\\n\\t\\t\\t\\t: \'jpg,jpeg,png,gif\'\\n\\t\\t);\\n\\t\\t$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.source=\' . $modx->toJSON($config) . \'<\\/script>\', true);\\n\\t}\\n\\t$modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/plupload.full.min.js\');\\n\\t$modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/files.js\');\\n\\n\\t$lang = $modx->getOption(\'cultureKey\');\\n\\tif ($lang != \'en\' && file_exists($Tickets->config[\'jsPath\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\')) {\\n\\t\\t$modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\');\\n\\t}\\n}\\n\\n$output = $Tickets->getChunk($tplWrapper, $data);\\n$key = md5($modx->toJSON($Tickets->config));\\n$_SESSION[\'TicketForm\'][$key] = $Tickets->config;\\n$output = str_ireplace(\'<\\/form>\', \\"\\\\n<input type=\\\\\\"hidden\\\\\\" name=\\\\\\"form_key\\\\\\" value=\\\\\\"{$key}\\\\\\" class=\\\\\\"disable-sisyphus\\\\\\" \\/>\\\\n<\\/form>\\", $output);\\n\\nreturn $output;"}',
        'guid' => '3f3d1600f376820906738cbb13593d93',
        'native_key' => NULL,
        'signature' => '67d48eb2477007c042282c8cdfc145d1',
      ),
      'dff74605e557544eb92d9f15e212d1bf' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketComments","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\nif (empty($thread)) {\\n\\t$scriptProperties[\'thread\'] = $modx->getOption(\'thread\', $scriptProperties, \'resource-\' . $modx->resource->id, true);\\n}\\n$scriptProperties[\'resource\'] = $modx->resource->get(\'id\');\\n$scriptProperties[\'snippetPrepareComment\'] = $modx->getOption(\'tickets.snippet_prepare_comment\');\\n$scriptProperties[\'commentEditTime\'] = $modx->getOption(\'tickets.comment_edit_time\', null, 180);\\n\\n$depth = $modx->getOption(\'depth\', $scriptProperties, 0);\\n$tplComments = $modx->getOption(\'tplComments\', $scriptProperties, \'tpl.Tickets.comment.wrapper\');\\n$tplCommentForm = $modx->getOption(\'tplCommentForm\', $scriptProperties, \'tpl.Tickets.comment.form\');\\n$tplCommentFormGuest = $modx->getOption(\'tplCommentFormGuest\', $scriptProperties, \'tpl.Tickets.comment.form.guest\');\\n$tplCommentAuth = $modx->getOption(\'tplCommentAuth\', $scriptProperties, \'tpl.Tickets.comment.one.auth\');\\n$tplCommentGuest = $modx->getOption(\'tplCommentGuest\', $scriptProperties, \'tpl.Tickets.comment.one.guest\');\\n$tplLoginToComment = $modx->getOption(\'tplLoginToComment\', $scriptProperties, \'tpl.Tickets.comment.login\');\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\n\\n\\/** @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\treturn false;\\n}\\n$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n\\/\\/ Prepare Ticket Thread\\n\\/** @var TicketThread $thread *\\/\\nif (!$thread = $modx->getObject(\'TicketThread\', array(\'name\' => $scriptProperties[\'thread\']))) {\\n\\t$thread = $modx->newObject(\'TicketThread\');\\n\\t$thread->fromArray(array(\\n\\t\\t\'name\' => $scriptProperties[\'thread\'],\\n\\t\\t\'resource\' => $modx->resource->get(\'id\'),\\n\\t\\t\'createdby\' => $modx->user->id,\\n\\t\\t\'createdon\' => date(\'Y-m-d H:i:s\'),\\n\\t\\t\'subscribers\' => array($modx->resource->get(\'createdby\')),\\n\\t));\\n}\\nelseif ($thread->get(\'deleted\')) {\\n\\treturn $modx->lexicon(\'ticket_thread_err_deleted\');\\n}\\n\\/\\/ Prepare session for guests\\nif (!empty($allowGuest) && !isset($_SESSION[\'TicketComments\'])) {\\n\\t$_SESSION[\'TicketComments\'] = array(\'name\' => \'\', \'email\' => \'\', \'ids\' => array());\\n}\\n\\n\\/\\/ Migrate authors to subscription system\\nif (!is_array($thread->get(\'subscribers\'))) {\\n\\t$thread->set(\'subscribers\', array($modx->resource->get(\'createdby\')));\\n}\\n$thread->set(\'resource\', $modx->resource->get(\'id\'));\\n$thread->set(\'properties\', $scriptProperties);\\n$thread->save();\\n\\n\\/\\/ Prepare query to db\\n$class = \'TicketComment\';\\n$where = array();\\nif (empty($showUnpublished)) {\\n\\t$where[\'published\'] = 1;\\n}\\n\\n\\/\\/ Joining tables\\n$innerJoin = array(\\n\\t\'Thread\' => array(\\n\\t\\t\'class\' => \'TicketThread\',\\n\\t\\t\'on\' => \'`Thread`.`id` = `TicketComment`.`thread` AND `Thread`.`name` = \\"\' . $thread->get(\'name\') . \'\\"\'\\n\\t)\\n);\\n$leftJoin = array(\\n\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\n\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\n);\\nif ($Tickets->authenticated) {\\n\\t$leftJoin[\'Vote\'] = array(\\n\\t\\t\'class\' => \'TicketVote\',\\n\\t\\t\'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id\\n\\t);\\n\\t$leftJoin[\'Star\'] = array(\\n\\t\\t\'class\' => \'TicketStar\',\\n\\t\\t\'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id\\n\\t);\\n}\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true) . \', `parent` as `new_parent`, `rating` as `rating_total`\',\\n\\t\'Thread\' => \'`Thread`.`resource`\',\\n\\t\'User\' => \'`User`.`username`\',\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'), true) . \',`Profile`.`email` as `user_email`\',\\n);\\nif ($Tickets->authenticated) {\\n\\t$select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\n\\t$select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => $class . \'.id\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'limit\' => 0,\\n\\t\'fastMode\' => true,\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Processing rows\\n$output = $commentsThread = null;\\nif (!empty($rows) && is_array($rows)) {\\n\\t$tmp = array();\\n\\t$i = 1;\\n\\tforeach ($rows as $row) {\\n\\t\\t$row[\'idx\'] = $i++;\\n\\t\\t$tmp[$row[\'id\']] = $row;\\n\\t}\\n\\t$rows = $thread->buildTree($tmp, $depth);\\n\\tunset($tmp, $i);\\n\\n\\tif (!empty($formBefore)) {\\n\\t\\t$rows = array_reverse($rows);\\n\\t}\\n\\n\\t$tpl = !$thread->get(\'closed\') && ($Tickets->authenticated || !empty($allowGuest))\\n\\t\\t? $tplCommentAuth\\n\\t\\t: $tplCommentGuest;\\n\\tforeach ($rows as $row) {\\n\\t\\t$output[] = $Tickets->templateNode($row, $tpl);\\n\\t}\\n\\n\\t$pdoFetch->addTime(\'Returning processed chunks\');\\n\\t$output = implode($outputSeparator, $output);\\n}\\n\\n$commentsThread = $pdoFetch->getChunk($tplComments, array(\\n\\t\'total\' => $modx->getPlaceholder($pdoFetch->config[\'totalVar\']),\\n\\t\'comments\' => $output,\\n\\t\'subscribed\' => $thread->isSubscribed(),\\n));\\n\\n$pls = array(\'thread\' => $scriptProperties[\'thread\']);\\nif (!$Tickets->authenticated && empty($allowGuest)) {\\n\\t$form = $pdoFetch->getChunk($tplLoginToComment);\\n}\\nelseif (!$Tickets->authenticated) {\\n\\t$pls[\'name\'] = $_SESSION[\'TicketComments\'][\'name\'];\\n\\t$pls[\'email\'] = $_SESSION[\'TicketComments\'][\'email\'];\\n\\tif (!empty($enableCaptcha)) {\\n\\t\\t$tmp = $Tickets->getCaptcha();\\n\\t\\t$pls[\'captcha\'] = $modx->lexicon(\'ticket_comment_captcha\', $tmp);\\n\\t}\\n\\t$form = $pdoFetch->getChunk($tplCommentFormGuest, $pls);\\n}\\nelse {\\n\\t$form = $pdoFetch->getChunk($tplCommentForm, $pls);\\n}\\n\\n$commentForm = $thread->get(\'closed\')\\n\\t? $modx->lexicon(\'ticket_thread_err_closed\')\\n\\t: $form;\\n$output = !empty($formBefore)\\n\\t? $commentForm . $commentsThread\\n\\t: $commentsThread . $commentForm;\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"CommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.formBefore = \' . (int)!empty($formBefore) . \';TicketsConfig.thread_depth = \' . (int)$depth . \';<\\/script>\', true);\\n\\n\\/\\/ Return output\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}","locked":0,"properties":"a:29:{s:6:\\"thread\\";a:7:{s:4:\\"name\\";s:6:\\"thread\\";s:4:\\"desc\\";s:19:\\"tickets_prop_thread\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"gravatarIcon\\";a:7:{s:4:\\"name\\";s:12:\\"gravatarIcon\\";s:4:\\"desc\\";s:25:\\"tickets_prop_gravatarIcon\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"mm\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"gravatarSize\\";a:7:{s:4:\\"name\\";s:12:\\"gravatarSize\\";s:4:\\"desc\\";s:25:\\"tickets_prop_gravatarSize\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"24\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"gravatarUrl\\";a:7:{s:4:\\"name\\";s:11:\\"gravatarUrl\\";s:4:\\"desc\\";s:24:\\"tickets_prop_gravatarUrl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:32:\\"https:\\/\\/www.gravatar.com\\/avatar\\/\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"tplCommentForm\\";a:7:{s:4:\\"name\\";s:14:\\"tplCommentForm\\";s:4:\\"desc\\";s:27:\\"tickets_prop_tplCommentForm\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"tpl.Tickets.comment.form\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:19:\\"tplCommentFormGuest\\";a:7:{s:4:\\"name\\";s:19:\\"tplCommentFormGuest\\";s:4:\\"desc\\";s:32:\\"tickets_prop_tplCommentFormGuest\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:30:\\"tpl.Tickets.comment.form.guest\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"tplCommentAuth\\";a:7:{s:4:\\"name\\";s:14:\\"tplCommentAuth\\";s:4:\\"desc\\";s:27:\\"tickets_prop_tplCommentAuth\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.Tickets.comment.one.auth\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"tplCommentGuest\\";a:7:{s:4:\\"name\\";s:15:\\"tplCommentGuest\\";s:4:\\"desc\\";s:28:\\"tickets_prop_tplCommentGuest\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:29:\\"tpl.Tickets.comment.one.guest\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplCommentDeleted\\";a:7:{s:4:\\"name\\";s:17:\\"tplCommentDeleted\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplCommentDeleted\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.one.deleted\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplComments\\";a:7:{s:4:\\"name\\";s:11:\\"tplComments\\";s:4:\\"desc\\";s:24:\\"tickets_prop_tplComments\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:27:\\"tpl.Tickets.comment.wrapper\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplLoginToComment\\";a:7:{s:4:\\"name\\";s:17:\\"tplLoginToComment\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplLoginToComment\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:25:\\"tpl.Tickets.comment.login\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:20:\\"tplCommentEmailOwner\\";a:7:{s:4:\\"name\\";s:20:\\"tplCommentEmailOwner\\";s:4:\\"desc\\";s:33:\\"tickets_prop_tplCommentEmailOwner\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.email.owner\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:20:\\"tplCommentEmailReply\\";a:7:{s:4:\\"name\\";s:20:\\"tplCommentEmailReply\\";s:4:\\"desc\\";s:33:\\"tickets_prop_tplCommentEmailReply\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.email.reply\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:27:\\"tplCommentEmailSubscription\\";a:7:{s:4:\\"name\\";s:27:\\"tplCommentEmailSubscription\\";s:4:\\"desc\\";s:40:\\"tickets_prop_tplCommentEmailSubscription\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:38:\\"tpl.Tickets.comment.email.subscription\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"tplCommentEmailBcc\\";a:7:{s:4:\\"name\\";s:18:\\"tplCommentEmailBcc\\";s:4:\\"desc\\";s:31:\\"tickets_prop_tplCommentEmailBcc\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:29:\\"tpl.Tickets.comment.email.bcc\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:26:\\"tplCommentEmailUnpublished\\";a:7:{s:4:\\"name\\";s:26:\\"tplCommentEmailUnpublished\\";s:4:\\"desc\\";s:39:\\"tickets_prop_tplCommentEmailUnpublished\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:37:\\"tpl.Tickets.comment.email.unpublished\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"autoPublish\\";a:7:{s:4:\\"name\\";s:11:\\"autoPublish\\";s:4:\\"desc\\";s:24:\\"tickets_prop_autoPublish\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"autoPublishGuest\\";a:7:{s:4:\\"name\\";s:16:\\"autoPublishGuest\\";s:4:\\"desc\\";s:29:\\"tickets_prop_autoPublishGuest\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"formBefore\\";a:7:{s:4:\\"name\\";s:10:\\"formBefore\\";s:4:\\"desc\\";s:23:\\"tickets_prop_formBefore\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:26:\\"tickets_prop_commentsDepth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"allowGuest\\";a:7:{s:4:\\"name\\";s:10:\\"allowGuest\\";s:4:\\"desc\\";s:23:\\"tickets_prop_allowGuest\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"allowGuestEdit\\";a:7:{s:4:\\"name\\";s:14:\\"allowGuestEdit\\";s:4:\\"desc\\";s:27:\\"tickets_prop_allowGuestEdit\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"allowGuestEmails\\";a:7:{s:4:\\"name\\";s:16:\\"allowGuestEmails\\";s:4:\\"desc\\";s:29:\\"tickets_prop_allowGuestEmails\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"enableCaptcha\\";a:7:{s:4:\\"name\\";s:13:\\"enableCaptcha\\";s:4:\\"desc\\";s:26:\\"tickets_prop_enableCaptcha\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"minCaptcha\\";a:7:{s:4:\\"name\\";s:10:\\"minCaptcha\\";s:4:\\"desc\\";s:23:\\"tickets_prop_minCaptcha\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"maxCaptcha\\";a:7:{s:4:\\"name\\";s:10:\\"maxCaptcha\\";s:4:\\"desc\\";s:23:\\"tickets_prop_maxCaptcha\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"requiredFields\\";a:7:{s:4:\\"name\\";s:14:\\"requiredFields\\";s:4:\\"desc\\";s:27:\\"tickets_prop_requiredFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"name,email\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"threadUrl\\";a:7:{s:4:\\"name\\";s:9:\\"threadUrl\\";s:4:\\"desc\\";s:22:\\"tickets_prop_threadUrl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.comments.php","content":"\\/** @var array $scriptProperties *\\/\\nif (empty($thread)) {\\n\\t$scriptProperties[\'thread\'] = $modx->getOption(\'thread\', $scriptProperties, \'resource-\' . $modx->resource->id, true);\\n}\\n$scriptProperties[\'resource\'] = $modx->resource->get(\'id\');\\n$scriptProperties[\'snippetPrepareComment\'] = $modx->getOption(\'tickets.snippet_prepare_comment\');\\n$scriptProperties[\'commentEditTime\'] = $modx->getOption(\'tickets.comment_edit_time\', null, 180);\\n\\n$depth = $modx->getOption(\'depth\', $scriptProperties, 0);\\n$tplComments = $modx->getOption(\'tplComments\', $scriptProperties, \'tpl.Tickets.comment.wrapper\');\\n$tplCommentForm = $modx->getOption(\'tplCommentForm\', $scriptProperties, \'tpl.Tickets.comment.form\');\\n$tplCommentFormGuest = $modx->getOption(\'tplCommentFormGuest\', $scriptProperties, \'tpl.Tickets.comment.form.guest\');\\n$tplCommentAuth = $modx->getOption(\'tplCommentAuth\', $scriptProperties, \'tpl.Tickets.comment.one.auth\');\\n$tplCommentGuest = $modx->getOption(\'tplCommentGuest\', $scriptProperties, \'tpl.Tickets.comment.one.guest\');\\n$tplLoginToComment = $modx->getOption(\'tplLoginToComment\', $scriptProperties, \'tpl.Tickets.comment.login\');\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\n\\n\\/** @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\treturn false;\\n}\\n$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n\\/\\/ Prepare Ticket Thread\\n\\/** @var TicketThread $thread *\\/\\nif (!$thread = $modx->getObject(\'TicketThread\', array(\'name\' => $scriptProperties[\'thread\']))) {\\n\\t$thread = $modx->newObject(\'TicketThread\');\\n\\t$thread->fromArray(array(\\n\\t\\t\'name\' => $scriptProperties[\'thread\'],\\n\\t\\t\'resource\' => $modx->resource->get(\'id\'),\\n\\t\\t\'createdby\' => $modx->user->id,\\n\\t\\t\'createdon\' => date(\'Y-m-d H:i:s\'),\\n\\t\\t\'subscribers\' => array($modx->resource->get(\'createdby\')),\\n\\t));\\n}\\nelseif ($thread->get(\'deleted\')) {\\n\\treturn $modx->lexicon(\'ticket_thread_err_deleted\');\\n}\\n\\/\\/ Prepare session for guests\\nif (!empty($allowGuest) && !isset($_SESSION[\'TicketComments\'])) {\\n\\t$_SESSION[\'TicketComments\'] = array(\'name\' => \'\', \'email\' => \'\', \'ids\' => array());\\n}\\n\\n\\/\\/ Migrate authors to subscription system\\nif (!is_array($thread->get(\'subscribers\'))) {\\n\\t$thread->set(\'subscribers\', array($modx->resource->get(\'createdby\')));\\n}\\n$thread->set(\'resource\', $modx->resource->get(\'id\'));\\n$thread->set(\'properties\', $scriptProperties);\\n$thread->save();\\n\\n\\/\\/ Prepare query to db\\n$class = \'TicketComment\';\\n$where = array();\\nif (empty($showUnpublished)) {\\n\\t$where[\'published\'] = 1;\\n}\\n\\n\\/\\/ Joining tables\\n$innerJoin = array(\\n\\t\'Thread\' => array(\\n\\t\\t\'class\' => \'TicketThread\',\\n\\t\\t\'on\' => \'`Thread`.`id` = `TicketComment`.`thread` AND `Thread`.`name` = \\"\' . $thread->get(\'name\') . \'\\"\'\\n\\t)\\n);\\n$leftJoin = array(\\n\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\n\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\n);\\nif ($Tickets->authenticated) {\\n\\t$leftJoin[\'Vote\'] = array(\\n\\t\\t\'class\' => \'TicketVote\',\\n\\t\\t\'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id\\n\\t);\\n\\t$leftJoin[\'Star\'] = array(\\n\\t\\t\'class\' => \'TicketStar\',\\n\\t\\t\'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id\\n\\t);\\n}\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true) . \', `parent` as `new_parent`, `rating` as `rating_total`\',\\n\\t\'Thread\' => \'`Thread`.`resource`\',\\n\\t\'User\' => \'`User`.`username`\',\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'), true) . \',`Profile`.`email` as `user_email`\',\\n);\\nif ($Tickets->authenticated) {\\n\\t$select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\n\\t$select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => $class . \'.id\',\\n\\t\'sortdir\' => \'ASC\',\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'limit\' => 0,\\n\\t\'fastMode\' => true,\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Processing rows\\n$output = $commentsThread = null;\\nif (!empty($rows) && is_array($rows)) {\\n\\t$tmp = array();\\n\\t$i = 1;\\n\\tforeach ($rows as $row) {\\n\\t\\t$row[\'idx\'] = $i++;\\n\\t\\t$tmp[$row[\'id\']] = $row;\\n\\t}\\n\\t$rows = $thread->buildTree($tmp, $depth);\\n\\tunset($tmp, $i);\\n\\n\\tif (!empty($formBefore)) {\\n\\t\\t$rows = array_reverse($rows);\\n\\t}\\n\\n\\t$tpl = !$thread->get(\'closed\') && ($Tickets->authenticated || !empty($allowGuest))\\n\\t\\t? $tplCommentAuth\\n\\t\\t: $tplCommentGuest;\\n\\tforeach ($rows as $row) {\\n\\t\\t$output[] = $Tickets->templateNode($row, $tpl);\\n\\t}\\n\\n\\t$pdoFetch->addTime(\'Returning processed chunks\');\\n\\t$output = implode($outputSeparator, $output);\\n}\\n\\n$commentsThread = $pdoFetch->getChunk($tplComments, array(\\n\\t\'total\' => $modx->getPlaceholder($pdoFetch->config[\'totalVar\']),\\n\\t\'comments\' => $output,\\n\\t\'subscribed\' => $thread->isSubscribed(),\\n));\\n\\n$pls = array(\'thread\' => $scriptProperties[\'thread\']);\\nif (!$Tickets->authenticated && empty($allowGuest)) {\\n\\t$form = $pdoFetch->getChunk($tplLoginToComment);\\n}\\nelseif (!$Tickets->authenticated) {\\n\\t$pls[\'name\'] = $_SESSION[\'TicketComments\'][\'name\'];\\n\\t$pls[\'email\'] = $_SESSION[\'TicketComments\'][\'email\'];\\n\\tif (!empty($enableCaptcha)) {\\n\\t\\t$tmp = $Tickets->getCaptcha();\\n\\t\\t$pls[\'captcha\'] = $modx->lexicon(\'ticket_comment_captcha\', $tmp);\\n\\t}\\n\\t$form = $pdoFetch->getChunk($tplCommentFormGuest, $pls);\\n}\\nelse {\\n\\t$form = $pdoFetch->getChunk($tplCommentForm, $pls);\\n}\\n\\n$commentForm = $thread->get(\'closed\')\\n\\t? $modx->lexicon(\'ticket_thread_err_closed\')\\n\\t: $form;\\n$output = !empty($formBefore)\\n\\t? $commentForm . $commentsThread\\n\\t: $commentsThread . $commentForm;\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"CommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.formBefore = \' . (int)!empty($formBefore) . \';TicketsConfig.thread_depth = \' . (int)$depth . \';<\\/script>\', true);\\n\\n\\/\\/ Return output\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}"}',
        'guid' => '373bad58adaff6ce8f1832a4b85babcc',
        'native_key' => NULL,
        'signature' => 'b5252db633229ec4d6c7e887f60535b5',
      ),
      '9073921d4096069af86a754666271112' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketLatest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\nif (!empty($cacheKey) && $output = $modx->cacheManager->get(\'tickets\\/latest.\' . $cacheKey)) {\\n\\treturn $output;\\n}\\n\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (empty($action)) {\\n\\t$action = \'comments\';\\n}\\nif ($action == \'tickets\' && $scriptProperties[\'tpl\'] == \'tpl.Tickets.comment.latest\') {\\n\\t$scriptProperties[\'tpl\'] = \'tpl.Tickets.ticket.latest\';\\n}\\n$action = strtolower($action);\\n$where = $action == \'tickets\'\\n\\t? array(\'class_key\' => \'Ticket\')\\n\\t: array();\\n\\nif (empty($showUnpublished)) {\\n\\t$where[\'Ticket.published\'] = 1;\\n}\\nif (empty($showHidden)) {\\n\\t$where[\'Ticket.hidemenu\'] = 0;\\n}\\nif (empty($showDeleted)) {\\n\\t$where[\'Ticket.deleted\'] = 0;\\n}\\nif (!isset($cacheTime)) {\\n\\t$cacheTime = 1800;\\n}\\nif (!empty($user)) {\\n\\t$user = array_map(\'trim\', explode(\',\', $user));\\n\\t$user_id = $user_username = array();\\n\\tforeach ($user as $v) {\\n\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t$user_id[] = $v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$user_username[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($user_id) && !empty($user_username)) {\\n\\t\\t$where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\', $user_username) . \'\\\\\'))\';\\n\\t}\\n\\telse {\\n\\t\\tif (!empty($user_id)) {\\n\\t\\t\\t$where[\'User.id:IN\'] = $user_id;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tif (!empty($user_username)) {\\n\\t\\t\\t\\t$where[\'User.username:IN\'] = $user_username;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Filter by ids\\nif (!empty($resources)) {\\n\\t$resources = array_map(\'trim\', explode(\',\', $resources));\\n\\t$in = $out = array();\\n\\tforeach ($resources as $v) {\\n\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\tif ($v < 0) {\\n\\t\\t\\t$out[] = abs($v);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$in[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($in)) {\\n\\t\\t$where[\'id:IN\'] = $in;\\n\\t}\\n\\tif (!empty($out)) {\\n\\t\\t$where[\'id:NOT IN\'] = $out;\\n\\t}\\n}\\n\\/\\/ Filter by parents\\nelse {\\n\\tif (!empty($parents) && $parents > 0) {\\n\\t\\t$pids = array_map(\'trim\', explode(\',\', $parents));\\n\\t\\t$parents = $pids;\\n\\t\\tif (!empty($depth) && $depth > 0) {\\n\\t\\t\\tforeach ($pids as $v) {\\n\\t\\t\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$parents = array_merge($parents, $modx->getChildIds($v, $depth));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif (!empty($parents)) {\\n\\t\\t\\t$where[\'Ticket.parent:IN\'] = $parents;\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Joining tables\\nif ($action == \'comments\') {\\n\\t$class = \'TicketComment\';\\n\\n\\t$innerJoin = array();\\n\\t$innerJoin[\'Thread\'] = empty($user)\\n\\t\\t? array(\'class\' => \'TicketThread\', \'on\' => \'`TicketComment`.`id` = `Thread`.`comment_last` AND `Thread`.`deleted` = 0\')\\n\\t\\t: array(\'class\' => \'TicketThread\', \'on\' => \'`TicketComment`.`thread` = `Thread`.`id` AND `Thread`.`deleted` = 0\');\\n\\t$innerJoin[\'Ticket\'] = array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\');\\n\\n\\t$leftJoin = array(\\n\\t\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n\\t\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\n\\t\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\n\\t);\\n\\n\\t$select = array(\\n\\t\\t\'TicketComment\' => !empty($includeContent)\\n\\t\\t\\t? $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true)\\n\\t\\t\\t: $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'text\', \'raw\'), true),\\n\\t\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t\\t? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\n\\t\\t\\t: $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true)\\n\\t);\\n\\t$groupby = empty($user)\\n\\t\\t? \'`Ticket`.`id`\'\\n\\t\\t: \'`TicketComment`.`id`\';\\n\\t$where[\'TicketComment.deleted\'] = 0;\\n}\\nelseif ($action == \'tickets\') {\\n\\t$class = \'Ticket\';\\n\\n\\t$innerJoin = array();\\n\\t$leftJoin = array(\\n\\t\\t\'Thread\' => array(\'class\' => \'TicketThread\', \'on\' => \'`Thread`.`resource` = `Ticket`.`id` AND `Thread`.`deleted` = 0\'),\\n\\t\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n\\t\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\n\\t\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `Ticket`.`createdby`\'),\\n\\t);\\n\\n\\t$select = array(\\n\\t\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t\\t? $modx->getSelectColumns(\'Ticket\', \'Ticket\')\\n\\t\\t\\t: $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'\', array(\'content\'), true),\\n\\t\\t\'Thread\' => \'`Thread`.`id` as `thread`\'\\n\\t);\\n\\t$groupby = \'`Ticket`.`id`\';\\n}\\nelse {\\n\\treturn \'Wrong action. You must use \\"ticket\\" or \\"comment\\".\';\\n}\\n\\n\\/\\/ Fields to select\\n$select = array_merge($select, array(\\n\\t\'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\n\\t\'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\n));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => \'createdon\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'groupby\' => $groupby,\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Processing rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$row[\'comments\'] = $modx->getCount(\'TicketComment\', array(\'thread\' => $row[\'thread\'], \'published\' => 1));\\n\\n\\t\\t\\/\\/ Prepare row\\n\\t\\tif ($class == \'Ticket\') {\\n\\t\\t\\t$row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\n\\t\\t\\t$properties = is_string($row[\'properties\'])\\n\\t\\t\\t\\t? $modx->fromJSON($row[\'properties\'])\\n\\t\\t\\t\\t: $row[\'properties\'];\\n\\t\\t\\tif (empty($properties[\'process_tags\'])) {\\n\\t\\t\\t\\tforeach ($row as $field => $value) {\\n\\t\\t\\t\\t\\t$row[$field] = str_replace(array(\'[\', \']\'), array(\'&#91;\', \'&#93;\'), $value);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\n\\t\\t\\tif (empty($row[\'createdby\'])) {\\n\\t\\t\\t\\t$row[\'fullname\'] = $row[\'name\'];\\n\\t\\t\\t\\t$row[\'guest\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\t$row[\'resource\'] = $row[\'ticket.id\'];\\n\\t\\t\\t$row = $Tickets->prepareComment($row);\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Processing chunk\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] = !empty($tpl)\\n\\t\\t\\t? $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\'])\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n\\t$pdoFetch->addTime(\'Returning processed chunks\');\\n}\\nif (empty($outputSeparator)) {\\n\\t$outputSeparator = \\"\\\\n\\";\\n}\\n$output = implode($outputSeparator, $output);\\n\\nif (!empty($cacheKey)) {\\n\\t$modx->cacheManager->set(\'tickets\\/latest.\' . $cacheKey, $output, $cacheTime);\\n}\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"TicketLatestLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}","locked":0,"properties":"a:23:{s:6:\\"action\\";a:7:{s:4:\\"name\\";s:6:\\"action\\";s:4:\\"desc\\";s:19:\\"tickets_prop_action\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:8:\\"Comments\\";s:5:\\"value\\";s:8:\\"comments\\";}i:1;a:2:{s:4:\\"text\\";s:7:\\"Tickets\\";s:5:\\"value\\";s:7:\\"tickets\\";}}s:5:\\"value\\";s:8:\\"comments\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:26:\\"tpl.Tickets.comment.latest\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:18:\\"tickets_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:19:\\"tickets_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:23:\\"tickets_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:23:\\"tickets_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"user\\";a:7:{s:4:\\"name\\";s:4:\\"user\\";s:4:\\"desc\\";s:17:\\"tickets_prop_user\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"cacheKey\\";a:7:{s:4:\\"name\\";s:8:\\"cacheKey\\";s:4:\\"desc\\";s:21:\\"tickets_prop_cacheKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:22:\\"tickets_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:1800;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.ticket_latest.php","content":"\\/* @var array $scriptProperties *\\/\\nif (!empty($cacheKey) && $output = $modx->cacheManager->get(\'tickets\\/latest.\' . $cacheKey)) {\\n\\treturn $output;\\n}\\n\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (empty($action)) {\\n\\t$action = \'comments\';\\n}\\nif ($action == \'tickets\' && $scriptProperties[\'tpl\'] == \'tpl.Tickets.comment.latest\') {\\n\\t$scriptProperties[\'tpl\'] = \'tpl.Tickets.ticket.latest\';\\n}\\n$action = strtolower($action);\\n$where = $action == \'tickets\'\\n\\t? array(\'class_key\' => \'Ticket\')\\n\\t: array();\\n\\nif (empty($showUnpublished)) {\\n\\t$where[\'Ticket.published\'] = 1;\\n}\\nif (empty($showHidden)) {\\n\\t$where[\'Ticket.hidemenu\'] = 0;\\n}\\nif (empty($showDeleted)) {\\n\\t$where[\'Ticket.deleted\'] = 0;\\n}\\nif (!isset($cacheTime)) {\\n\\t$cacheTime = 1800;\\n}\\nif (!empty($user)) {\\n\\t$user = array_map(\'trim\', explode(\',\', $user));\\n\\t$user_id = $user_username = array();\\n\\tforeach ($user as $v) {\\n\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t$user_id[] = $v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$user_username[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($user_id) && !empty($user_username)) {\\n\\t\\t$where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\', $user_username) . \'\\\\\'))\';\\n\\t}\\n\\telse {\\n\\t\\tif (!empty($user_id)) {\\n\\t\\t\\t$where[\'User.id:IN\'] = $user_id;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tif (!empty($user_username)) {\\n\\t\\t\\t\\t$where[\'User.username:IN\'] = $user_username;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Filter by ids\\nif (!empty($resources)) {\\n\\t$resources = array_map(\'trim\', explode(\',\', $resources));\\n\\t$in = $out = array();\\n\\tforeach ($resources as $v) {\\n\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\tif ($v < 0) {\\n\\t\\t\\t$out[] = abs($v);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$in[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($in)) {\\n\\t\\t$where[\'id:IN\'] = $in;\\n\\t}\\n\\tif (!empty($out)) {\\n\\t\\t$where[\'id:NOT IN\'] = $out;\\n\\t}\\n}\\n\\/\\/ Filter by parents\\nelse {\\n\\tif (!empty($parents) && $parents > 0) {\\n\\t\\t$pids = array_map(\'trim\', explode(\',\', $parents));\\n\\t\\t$parents = $pids;\\n\\t\\tif (!empty($depth) && $depth > 0) {\\n\\t\\t\\tforeach ($pids as $v) {\\n\\t\\t\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t$parents = array_merge($parents, $modx->getChildIds($v, $depth));\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif (!empty($parents)) {\\n\\t\\t\\t$where[\'Ticket.parent:IN\'] = $parents;\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Joining tables\\nif ($action == \'comments\') {\\n\\t$class = \'TicketComment\';\\n\\n\\t$innerJoin = array();\\n\\t$innerJoin[\'Thread\'] = empty($user)\\n\\t\\t? array(\'class\' => \'TicketThread\', \'on\' => \'`TicketComment`.`id` = `Thread`.`comment_last` AND `Thread`.`deleted` = 0\')\\n\\t\\t: array(\'class\' => \'TicketThread\', \'on\' => \'`TicketComment`.`thread` = `Thread`.`id` AND `Thread`.`deleted` = 0\');\\n\\t$innerJoin[\'Ticket\'] = array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\');\\n\\n\\t$leftJoin = array(\\n\\t\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n\\t\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\n\\t\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\n\\t);\\n\\n\\t$select = array(\\n\\t\\t\'TicketComment\' => !empty($includeContent)\\n\\t\\t\\t? $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true)\\n\\t\\t\\t: $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'text\', \'raw\'), true),\\n\\t\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t\\t? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\n\\t\\t\\t: $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true)\\n\\t);\\n\\t$groupby = empty($user)\\n\\t\\t? \'`Ticket`.`id`\'\\n\\t\\t: \'`TicketComment`.`id`\';\\n\\t$where[\'TicketComment.deleted\'] = 0;\\n}\\nelseif ($action == \'tickets\') {\\n\\t$class = \'Ticket\';\\n\\n\\t$innerJoin = array();\\n\\t$leftJoin = array(\\n\\t\\t\'Thread\' => array(\'class\' => \'TicketThread\', \'on\' => \'`Thread`.`resource` = `Ticket`.`id` AND `Thread`.`deleted` = 0\'),\\n\\t\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n\\t\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\n\\t\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `Ticket`.`createdby`\'),\\n\\t);\\n\\n\\t$select = array(\\n\\t\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t\\t? $modx->getSelectColumns(\'Ticket\', \'Ticket\')\\n\\t\\t\\t: $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'\', array(\'content\'), true),\\n\\t\\t\'Thread\' => \'`Thread`.`id` as `thread`\'\\n\\t);\\n\\t$groupby = \'`Ticket`.`id`\';\\n}\\nelse {\\n\\treturn \'Wrong action. You must use \\"ticket\\" or \\"comment\\".\';\\n}\\n\\n\\/\\/ Fields to select\\n$select = array_merge($select, array(\\n\\t\'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\n\\t\'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\n));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => \'createdon\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'groupby\' => $groupby,\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Processing rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$row[\'comments\'] = $modx->getCount(\'TicketComment\', array(\'thread\' => $row[\'thread\'], \'published\' => 1));\\n\\n\\t\\t\\/\\/ Prepare row\\n\\t\\tif ($class == \'Ticket\') {\\n\\t\\t\\t$row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\n\\t\\t\\t$properties = is_string($row[\'properties\'])\\n\\t\\t\\t\\t? $modx->fromJSON($row[\'properties\'])\\n\\t\\t\\t\\t: $row[\'properties\'];\\n\\t\\t\\tif (empty($properties[\'process_tags\'])) {\\n\\t\\t\\t\\tforeach ($row as $field => $value) {\\n\\t\\t\\t\\t\\t$row[$field] = str_replace(array(\'[\', \']\'), array(\'&#91;\', \'&#93;\'), $value);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\n\\t\\t\\tif (empty($row[\'createdby\'])) {\\n\\t\\t\\t\\t$row[\'fullname\'] = $row[\'name\'];\\n\\t\\t\\t\\t$row[\'guest\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\t$row[\'resource\'] = $row[\'ticket.id\'];\\n\\t\\t\\t$row = $Tickets->prepareComment($row);\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Processing chunk\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] = !empty($tpl)\\n\\t\\t\\t? $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\'])\\n\\t\\t\\t: $pdoFetch->getChunk(\'\', $row);\\n\\t}\\n\\t$pdoFetch->addTime(\'Returning processed chunks\');\\n}\\nif (empty($outputSeparator)) {\\n\\t$outputSeparator = \\"\\\\n\\";\\n}\\n$output = implode($outputSeparator, $output);\\n\\nif (!empty($cacheKey)) {\\n\\t$modx->cacheManager->set(\'tickets\\/latest.\' . $cacheKey, $output, $cacheTime);\\n}\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"TicketLatestLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}"}',
        'guid' => '46d76722c29b5b0961c77a2f9cc55f3c',
        'native_key' => NULL,
        'signature' => '88e16c615c98b9865e63178f7da5597b',
      ),
      '306b9e034044e81a7c1458871a351385' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketMeta","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n$scriptProperties[\'nestedChunkPrefix\'] = \'tickets_\';\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (empty($id)) {\\n\\t$id = $modx->resource->id;\\n}\\n\\/** @var Ticket|modResource $ticket *\\/\\nif (!$ticket = $modx->getObject(\'modResource\', $id)) {\\n\\treturn \'Could not load resource with id = \' . $id;\\n}\\n\\n$class = $ticket instanceof Ticket\\n\\t? \'Ticket\'\\n\\t: \'modResource\';\\n\\n$data = $ticket->toArray();\\n$vote = $pdoFetch->getObject(\'TicketVote\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\', \'createdby\' => $modx->user->id), array(\'select\' => \'value\', \'sortby\' => \'id\'));\\nif (!empty($vote)) {\\n\\t$data[\'vote\'] = $vote[\'value\'];\\n}\\n\\n$star = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\', \'createdby\' => $modx->user->id));\\n$data[\'stared\'] = !empty($star);\\n$data[\'unstared\'] = empty($star);\\n\\nif ($class != \'Ticket\') {\\n\\t\\/\\/ Rating\\n\\tif (!$modx->user->id || $modx->user->id == $ticket->createdby) {\\n\\t\\t$data[\'voted\'] = 0;\\n\\t}\\n\\telse {\\n\\t\\t$q = $modx->newQuery(\'TicketVote\');\\n\\t\\t$q->where(array(\'id\' => $ticket->id, \'createdby\' => $modx->user->id, \'class\' => \'Ticket\'));\\n\\t\\t$q->select(\'`value`\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->startTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t$voted = $q->stmt->fetchColumn();\\n\\t\\t\\tif ($voted > 0) {\\n\\t\\t\\t\\t$voted = 1;\\n\\t\\t\\t}\\n\\t\\t\\telseif ($voted < 0) {\\n\\t\\t\\t\\t$voted = -1;\\n\\t\\t\\t}\\n\\t\\t\\t$data[\'voted\'] = $voted;\\n\\t\\t}\\n\\t}\\n\\t$data[\'can_vote\'] = $data[\'voted\'] === false && $Tickets->authenticated && $modx->user->id != $ticket->createdby;\\n\\n\\t$data = array_merge($ticket->getProperties(\'tickets\'), $data);\\n\\tif (!isset($data[\'rating\'])) {\\n\\t\\t$data[\'rating\'] = $data[\'rating_total\'] = $data[\'rating_plus\'] = $data[\'rating_minus\'] = 0;\\n\\t}\\n\\n\\t\\/\\/ Views\\n\\t$data[\'views\'] = $modx->getCount(\'TicketView\', array(\'parent\' => $ticket->id));\\n\\n\\t\\/\\/ Comments\\n\\t$data[\'comments\'] = 0;\\n\\t$q = $modx->newQuery(\'TicketThread\', array(\'name\' => \'resource-\' . $ticket->id));\\n\\t$q->leftJoin(\'TicketComment\', \'TicketComment\', \\"`TicketThread`.`id` = `TicketComment`.`thread` AND `TicketComment`.`published` = 1\\");\\n\\t$q->select(\'COUNT(`TicketComment`.`id`) as `comments`\');\\n\\t$tstart = microtime(true);\\n\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t$modx->startTime += microtime(true) - $tstart;\\n\\t\\t$modx->executedQueries++;\\n\\t\\t$data[\'comments\'] = (int)$q->stmt->fetchColumn();\\n\\t}\\n\\n\\t\\/\\/ Date ago\\n\\t$data[\'date_ago\'] = $Tickets->dateFormat($data[\'createdon\']);\\n\\n\\t\\/\\/ Stars\\n\\t$data[\'stars\'] = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\'));\\n}\\n\\nif ($data[\'rating\'] > 0) {\\n\\t$data[\'rating\'] = \'+\' . $data[\'rating\'];\\n\\t$data[\'rating_positive\'] = 1;\\n}\\nelseif ($data[\'rating\'] < 0) {\\n\\t$data[\'rating_negative\'] = 1;\\n}\\n\\nif (!$Tickets->authenticated || $modx->user->id == $ticket->createdby) {\\n\\t$data[\'cant_vote\'] = 1;\\n}\\nelseif (array_key_exists(\'vote\', $data)) {\\n\\tif ($data[\'vote\'] == \'\') {\\n\\t\\t$data[\'can_vote\'] = 1;\\n\\t}\\n\\telseif ($data[\'vote\'] > 0) {\\n\\t\\t$data[\'voted_plus\'] = 1;\\n\\t\\t$data[\'cant_vote\'] = 1;\\n\\t}\\n\\telseif ($data[\'vote\'] < 0) {\\n\\t\\t$data[\'voted_minus\'] = 1;\\n\\t\\t$data[\'cant_vote\'] = 1;\\n\\t}\\n\\telse {\\n\\t\\t$data[\'voted_none\'] = 1;\\n\\t\\t$data[\'cant_vote\'] = 1;\\n\\t}\\n}\\n\\n$data[\'active\'] = (int)!empty($data[\'can_vote\']);\\n$data[\'inactive\'] = (int)!empty($data[\'cant_vote\']);\\n\\n$data[\'can_star\'] = $Tickets->authenticated;\\n\\nif (!empty($getSection)) {\\n\\t$fields = $modx->getFieldMeta(\'modResource\');\\n\\tunset($fields[\'content\']);\\n\\t$section = $pdoFetch->getObject(\'modResource\', $ticket->parent, array(\'select\' => implode(\',\', array_keys($fields))));\\n\\tforeach ($section as $k => $v) {\\n\\t\\t$data[\'section.\' . $k] = $v;\\n\\t}\\n}\\nif (!empty($getUser)) {\\n\\t$fields = $modx->getFieldMeta(\'modUserProfile\');\\n\\t$user = $pdoFetch->getObject(\'modUserProfile\', array(\'internalKey\' => $ticket->createdby), array(\\n\\t\\t\'innerJoin\' => array(\\n\\t\\t\\t\'modUser\' => array(\'class\' => \'modUser\', \'on\' => \'`modUserProfile`.`internalKey` = `modUser`.`id`\')\\n\\t\\t),\\n\\t\\t\'select\' => array(\\n\\t\\t\\t\'modUserProfile\' => implode(\',\', array_keys($fields)),\\n\\t\\t\\t\'modUser\' => \'username\',\\n\\t\\t)\\n\\t));\\n\\t$data = array_merge($data, $user);\\n}\\n\\nif (!empty($getFiles)) {\\n\\t$where = array(\'deleted\' => 0, \'class\' => \'Ticket\', \'parent\' => $ticket->id);\\n\\t$collection = $pdoFetch->getCollection(\'TicketFile\', $where, array(\'sortby\' => \'createdon\', \'sortdir\' => \'ASC\'));\\n\\t$data[\'files\'] = $content = \'\';\\n\\tif (!empty($unusedFiles)) {\\n\\t\\t$content = $ticket->getContent();\\n\\t}\\n\\tforeach ($collection as $item) {\\n\\t\\tif ($content && strpos($content, $item[\'url\']) !== false) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\t$item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\n\\t\\t$data[\'files\'] .= !empty($tplFile)\\n\\t\\t\\t? $Tickets->getChunk($tplFile, $item)\\n\\t\\t\\t: $Tickets->getChunk(\'\', $item);\\n\\t}\\n\\t$data[\'has_files\'] = !empty($data[\'files\']);\\n}\\n$data[\'id\'] = $ticket->get(\'id\');\\n\\nreturn !empty($tpl)\\n\\t? $Tickets->getChunk($tpl, $data)\\n\\t: $Tickets->getChunk(\'\', $data);","locked":0,"properties":"a:6:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:21:\\"tickets_prop_meta_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:16:\\"tpl.Tickets.meta\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplFile\\";a:7:{s:4:\\"name\\";s:7:\\"tplFile\\";s:4:\\"desc\\";s:25:\\"tickets_prop_meta_tplFile\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:21:\\"tpl.Tickets.meta.file\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"getSection\\";a:7:{s:4:\\"name\\";s:10:\\"getSection\\";s:4:\\"desc\\";s:23:\\"tickets_prop_getSection\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"getUser\\";a:7:{s:4:\\"name\\";s:7:\\"getUser\\";s:4:\\"desc\\";s:20:\\"tickets_prop_getUser\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"getFiles\\";a:7:{s:4:\\"name\\";s:8:\\"getFiles\\";s:4:\\"desc\\";s:21:\\"tickets_prop_getFiles\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"unusedFiles\\";a:7:{s:4:\\"name\\";s:11:\\"unusedFiles\\";s:4:\\"desc\\";s:24:\\"tickets_prop_unusedFiles\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.ticket_meta.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n$scriptProperties[\'nestedChunkPrefix\'] = \'tickets_\';\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (empty($id)) {\\n\\t$id = $modx->resource->id;\\n}\\n\\/** @var Ticket|modResource $ticket *\\/\\nif (!$ticket = $modx->getObject(\'modResource\', $id)) {\\n\\treturn \'Could not load resource with id = \' . $id;\\n}\\n\\n$class = $ticket instanceof Ticket\\n\\t? \'Ticket\'\\n\\t: \'modResource\';\\n\\n$data = $ticket->toArray();\\n$vote = $pdoFetch->getObject(\'TicketVote\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\', \'createdby\' => $modx->user->id), array(\'select\' => \'value\', \'sortby\' => \'id\'));\\nif (!empty($vote)) {\\n\\t$data[\'vote\'] = $vote[\'value\'];\\n}\\n\\n$star = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\', \'createdby\' => $modx->user->id));\\n$data[\'stared\'] = !empty($star);\\n$data[\'unstared\'] = empty($star);\\n\\nif ($class != \'Ticket\') {\\n\\t\\/\\/ Rating\\n\\tif (!$modx->user->id || $modx->user->id == $ticket->createdby) {\\n\\t\\t$data[\'voted\'] = 0;\\n\\t}\\n\\telse {\\n\\t\\t$q = $modx->newQuery(\'TicketVote\');\\n\\t\\t$q->where(array(\'id\' => $ticket->id, \'createdby\' => $modx->user->id, \'class\' => \'Ticket\'));\\n\\t\\t$q->select(\'`value`\');\\n\\t\\t$tstart = microtime(true);\\n\\t\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t\\t$modx->startTime += microtime(true) - $tstart;\\n\\t\\t\\t$modx->executedQueries++;\\n\\t\\t\\t$voted = $q->stmt->fetchColumn();\\n\\t\\t\\tif ($voted > 0) {\\n\\t\\t\\t\\t$voted = 1;\\n\\t\\t\\t}\\n\\t\\t\\telseif ($voted < 0) {\\n\\t\\t\\t\\t$voted = -1;\\n\\t\\t\\t}\\n\\t\\t\\t$data[\'voted\'] = $voted;\\n\\t\\t}\\n\\t}\\n\\t$data[\'can_vote\'] = $data[\'voted\'] === false && $Tickets->authenticated && $modx->user->id != $ticket->createdby;\\n\\n\\t$data = array_merge($ticket->getProperties(\'tickets\'), $data);\\n\\tif (!isset($data[\'rating\'])) {\\n\\t\\t$data[\'rating\'] = $data[\'rating_total\'] = $data[\'rating_plus\'] = $data[\'rating_minus\'] = 0;\\n\\t}\\n\\n\\t\\/\\/ Views\\n\\t$data[\'views\'] = $modx->getCount(\'TicketView\', array(\'parent\' => $ticket->id));\\n\\n\\t\\/\\/ Comments\\n\\t$data[\'comments\'] = 0;\\n\\t$q = $modx->newQuery(\'TicketThread\', array(\'name\' => \'resource-\' . $ticket->id));\\n\\t$q->leftJoin(\'TicketComment\', \'TicketComment\', \\"`TicketThread`.`id` = `TicketComment`.`thread` AND `TicketComment`.`published` = 1\\");\\n\\t$q->select(\'COUNT(`TicketComment`.`id`) as `comments`\');\\n\\t$tstart = microtime(true);\\n\\tif ($q->prepare() && $q->stmt->execute()) {\\n\\t\\t$modx->startTime += microtime(true) - $tstart;\\n\\t\\t$modx->executedQueries++;\\n\\t\\t$data[\'comments\'] = (int)$q->stmt->fetchColumn();\\n\\t}\\n\\n\\t\\/\\/ Date ago\\n\\t$data[\'date_ago\'] = $Tickets->dateFormat($data[\'createdon\']);\\n\\n\\t\\/\\/ Stars\\n\\t$data[\'stars\'] = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\'));\\n}\\n\\nif ($data[\'rating\'] > 0) {\\n\\t$data[\'rating\'] = \'+\' . $data[\'rating\'];\\n\\t$data[\'rating_positive\'] = 1;\\n}\\nelseif ($data[\'rating\'] < 0) {\\n\\t$data[\'rating_negative\'] = 1;\\n}\\n\\nif (!$Tickets->authenticated || $modx->user->id == $ticket->createdby) {\\n\\t$data[\'cant_vote\'] = 1;\\n}\\nelseif (array_key_exists(\'vote\', $data)) {\\n\\tif ($data[\'vote\'] == \'\') {\\n\\t\\t$data[\'can_vote\'] = 1;\\n\\t}\\n\\telseif ($data[\'vote\'] > 0) {\\n\\t\\t$data[\'voted_plus\'] = 1;\\n\\t\\t$data[\'cant_vote\'] = 1;\\n\\t}\\n\\telseif ($data[\'vote\'] < 0) {\\n\\t\\t$data[\'voted_minus\'] = 1;\\n\\t\\t$data[\'cant_vote\'] = 1;\\n\\t}\\n\\telse {\\n\\t\\t$data[\'voted_none\'] = 1;\\n\\t\\t$data[\'cant_vote\'] = 1;\\n\\t}\\n}\\n\\n$data[\'active\'] = (int)!empty($data[\'can_vote\']);\\n$data[\'inactive\'] = (int)!empty($data[\'cant_vote\']);\\n\\n$data[\'can_star\'] = $Tickets->authenticated;\\n\\nif (!empty($getSection)) {\\n\\t$fields = $modx->getFieldMeta(\'modResource\');\\n\\tunset($fields[\'content\']);\\n\\t$section = $pdoFetch->getObject(\'modResource\', $ticket->parent, array(\'select\' => implode(\',\', array_keys($fields))));\\n\\tforeach ($section as $k => $v) {\\n\\t\\t$data[\'section.\' . $k] = $v;\\n\\t}\\n}\\nif (!empty($getUser)) {\\n\\t$fields = $modx->getFieldMeta(\'modUserProfile\');\\n\\t$user = $pdoFetch->getObject(\'modUserProfile\', array(\'internalKey\' => $ticket->createdby), array(\\n\\t\\t\'innerJoin\' => array(\\n\\t\\t\\t\'modUser\' => array(\'class\' => \'modUser\', \'on\' => \'`modUserProfile`.`internalKey` = `modUser`.`id`\')\\n\\t\\t),\\n\\t\\t\'select\' => array(\\n\\t\\t\\t\'modUserProfile\' => implode(\',\', array_keys($fields)),\\n\\t\\t\\t\'modUser\' => \'username\',\\n\\t\\t)\\n\\t));\\n\\t$data = array_merge($data, $user);\\n}\\n\\nif (!empty($getFiles)) {\\n\\t$where = array(\'deleted\' => 0, \'class\' => \'Ticket\', \'parent\' => $ticket->id);\\n\\t$collection = $pdoFetch->getCollection(\'TicketFile\', $where, array(\'sortby\' => \'createdon\', \'sortdir\' => \'ASC\'));\\n\\t$data[\'files\'] = $content = \'\';\\n\\tif (!empty($unusedFiles)) {\\n\\t\\t$content = $ticket->getContent();\\n\\t}\\n\\tforeach ($collection as $item) {\\n\\t\\tif ($content && strpos($content, $item[\'url\']) !== false) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\t$item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\n\\t\\t$data[\'files\'] .= !empty($tplFile)\\n\\t\\t\\t? $Tickets->getChunk($tplFile, $item)\\n\\t\\t\\t: $Tickets->getChunk(\'\', $item);\\n\\t}\\n\\t$data[\'has_files\'] = !empty($data[\'files\']);\\n}\\n$data[\'id\'] = $ticket->get(\'id\');\\n\\nreturn !empty($tpl)\\n\\t? $Tickets->getChunk($tpl, $data)\\n\\t: $Tickets->getChunk(\'\', $data);"}',
        'guid' => 'e90e091b0a008e239f6ef8681d169d3c',
        'native_key' => NULL,
        'signature' => '7c95d03d18609a50c8a6053c437e40b4',
      ),
      '950f0380523839d67a49410fd8c8d3e9' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getTickets","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (isset($parents) && $parents === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\n\\n$class = \'Ticket\';\\n$where = array(\'class_key\' => $class);\\n\\n\\/\\/Filter by user\\nif (!empty($user)) {\\n\\t$user = array_map(\'trim\', explode(\',\', $user));\\n\\t$user_id = $user_username = array();\\n\\tforeach ($user as $v) {\\n\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t$user_id[] = $v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$user_username[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($user_id) && !empty($user_username)) {\\n\\t\\t$where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\', $user_username) . \'\\\\\'))\';\\n\\t}\\n\\telse {\\n\\t\\tif (!empty($user_id)) {\\n\\t\\t\\t$where[\'User.id:IN\'] = $user_id;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tif (!empty($user_username)) {\\n\\t\\t\\t\\t$where[\'User.username:IN\'] = $user_username;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Joining tables\\n$leftJoin = array(\\n\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\n\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `User`.`id`\'),\\n);\\nif ($Tickets->authenticated) {\\n\\t$leftJoin[\'Vote\'] = array(\\n\\t\\t\'class\' => \'TicketVote\',\\n\\t\\t\'on\' => \'`Vote`.`id` = `Ticket`.`id` AND `Vote`.`class` = \\"Ticket\\" AND `Vote`.`createdby` = \' . $modx->user->id\\n\\t);\\n\\t$leftJoin[\'Star\'] = array(\\n\\t\\t\'class\' => \'TicketStar\',\\n\\t\\t\'on\' => \'`Star`.`id` = `Ticket`.`id` AND `Star`.`class` = \\"Ticket\\" AND `Star`.`createdby` = \' . $modx->user->id\\n\\t);\\n}\\n\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\n\\t\'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\n\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns($class, $class)\\n\\t\\t: $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\n);\\nif ($Tickets->authenticated) {\\n\\t$select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\n\\t$select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => \'createdon\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t? \'ids\'\\n\\t\\t: \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\nif (!empty($returnIds)) {\\n\\treturn $rows;\\n}\\n\\n\\/\\/ Processing rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Handle properties\\n\\t\\t$properties = is_string($row[\'properties\'])\\n\\t\\t\\t? $modx->fromJSON($row[\'properties\'])\\n\\t\\t\\t: $row[\'properties\'];\\n\\t\\tif (!empty($properties[\'tickets\'])) {\\n\\t\\t\\t$properties = $properties[\'tickets\'];\\n\\t\\t}\\n\\t\\tif (empty($properties[\'process_tags\'])) {\\n\\t\\t\\tforeach ($row as $field => $value) {\\n\\t\\t\\t\\t$row[$field] = str_replace(array(\'[\', \']\'), array(\'&#91;\', \'&#93;\'), $value);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif (!is_array($properties)) {\\n\\t\\t\\t$properties = array();\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Handle rating\\n\\t\\t$row[\'rating\'] = $row[\'rating_total\'] = array_key_exists(\'rating\', $properties)\\n\\t\\t\\t? $properties[\'rating\']\\n\\t\\t\\t: 0;\\n\\t\\t$row[\'rating_plus\'] = array_key_exists(\'rating_plus\', $properties)\\n\\t\\t\\t? $properties[\'rating_plus\']\\n\\t\\t\\t: 0;\\n\\t\\t$row[\'rating_minus\'] = array_key_exists(\'rating_minus\', $properties)\\n\\t\\t\\t? $properties[\'rating_minus\']\\n\\t\\t\\t: 0;\\n\\t\\tif ($row[\'rating\'] > 0) {\\n\\t\\t\\t$row[\'rating\'] = \'+\' . $row[\'rating\'];\\n\\t\\t\\t$row[\'rating_positive\'] = 1;\\n\\t\\t}\\n\\t\\telseif ($row[\'rating\'] < 0) {\\n\\t\\t\\t$row[\'rating_negative\'] = 1;\\n\\t\\t}\\n\\n\\t\\tif (!$Tickets->authenticated || $modx->user->id == $row[\'createdby\']) {\\n\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t}\\n\\t\\telseif (array_key_exists(\'vote\', $row)) {\\n\\t\\t\\tif ($row[\'vote\'] == \'\') {\\n\\t\\t\\t\\t$row[\'can_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\telseif ($row[\'vote\'] > 0) {\\n\\t\\t\\t\\t$row[\'voted_plus\'] = 1;\\n\\t\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\telseif ($row[\'vote\'] < 0) {\\n\\t\\t\\t\\t$row[\'voted_minus\'] = 1;\\n\\t\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$row[\'voted_none\'] = 1;\\n\\t\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t$row[\'active\'] = (int)!empty($row[\'can_vote\']);\\n\\t\\t$row[\'inactive\'] = (int)!empty($row[\'cant_vote\']);\\n\\n\\t\\t$row[\'can_star\'] = $Tickets->authenticated;\\n\\t\\t$row[\'stared\'] = !empty($row[\'star\']);\\n\\t\\t$row[\'unstared\'] = empty($row[\'star\']);\\n\\n\\t\\t\\/\\/ Adding fields to row\\n\\t\\t$additional_fields = $pdoFetch->getObject(\'Ticket\', $row[\'id\'], array(\\n\\t\\t\\t\'leftJoin\' => array(\\n\\t\\t\\t\\t\'View\' => array(\'class\' => \'TicketView\', \'on\' => \'`Ticket`.`id` = `View`.`parent`\'),\\n\\t\\t\\t\\t\'Thread\' => array(\'class\' => \'TicketThread\', \'on\' => \'`Thread`.`resource` = `Ticket`.`id`  AND `Thread`.`deleted` = 0\'),\\n\\t\\t\\t),\\n\\t\\t\\t\'select\' => array(\\n\\t\\t\\t\\t\'View\' => \'COUNT(`View`.`parent`) as `views`\',\\n\\t\\t\\t\\t\'Thread\' => \'`Thread`.`id` as `thread`\',\\n\\t\\t\\t),\\n\\t\\t\\t\'groupby\' => $class . \'.id\'\\n\\t\\t));\\n\\t\\t$row = array_merge($row, $additional_fields);\\n\\t\\t$row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\n\\t\\t$row[\'comments\'] = $modx->getCount(\'TicketComment\', array(\'published\' => 1, \'thread\' => $row[\'thread\']));\\n\\t\\t$row[\'stars\'] = $modx->getCount(\'TicketStar\', array(\'id\' => $row[\'id\'], \'class\' => \'Ticket\'));\\n\\t\\t\\/\\/ Special fields for quick placeholders\\n\\t\\t$row[\'isauthor\'] = $modx->user->id == $row[\'createdby\'];\\n\\t\\t$row[\'unpublished\'] = empty($row[\'published\']);\\n\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t\\/\\/ Processing new comments\\n\\t\\tif ($Tickets->authenticated) {\\n\\t\\t\\t$last_view = $pdoFetch->getObject(\'TicketView\', array(\\n\\t\\t\\t\\t\'parent\' => $row[\'id\'],\\n\\t\\t\\t\\t\'uid\' => $modx->user->id,\\n\\t\\t\\t), array(\\n\\t\\t\\t\\t\'sortby\' => \'timestamp\',\\n\\t\\t\\t\\t\'sortdir\' => \'DESC\',\\n\\t\\t\\t\\t\'limit\' => 1,\\n\\t\\t\\t));\\n\\t\\t\\tif (!empty($last_view[\'timestamp\'])) {\\n\\t\\t\\t\\t$row[\'new_comments\'] = $modx->getCount(\'TicketComment\', array(\\n\\t\\t\\t\\t\\t\'published\' => 1,\\n\\t\\t\\t\\t\\t\'thread\' => $row[\'thread\'],\\n\\t\\t\\t\\t\\t\'createdon:>\' => $last_view[\'timestamp\'],\\n\\t\\t\\t\\t\\t\'createdby:!=\' => $modx->user->id,\\n\\t\\t\\t\\t));\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$row[\'new_comments\'] = $row[\'comments\'];\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$row[\'new_comments\'] = \'\';\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Processing chunk\\n\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] = empty($tpl)\\n\\t\\t\\t? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n\\t\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Returning processed chunks\');\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"getTicketsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (empty($outputSeparator)) {\\n\\t\\t$outputSeparator = \\"\\\\n\\";\\n\\t}\\n\\t$output = implode($outputSeparator, $output);\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$array = array(\'output\' => $output);\\n\\t\\tif ($Tickets->authenticated && $modx->resource->class_key == \'TicketsSection\') {\\n\\t\\t\\t\\/** @var TicketsSection $section *\\/\\n\\t\\t\\t$section = &$modx->resource;\\n\\t\\t\\t$array[\'subscribed\'] = $section->isSubscribed();\\n\\t\\t}\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, $array, $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:21:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"tpl.Tickets.list.row\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:18:\\"tickets_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:19:\\"tickets_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:23:\\"tickets_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:23:\\"tickets_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"user\\";a:7:{s:4:\\"name\\";s:4:\\"user\\";s:4:\\"desc\\";s:17:\\"tickets_prop_user\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:23:\\"tickets_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_tickets.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (isset($parents) && $parents === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\n\\n$class = \'Ticket\';\\n$where = array(\'class_key\' => $class);\\n\\n\\/\\/Filter by user\\nif (!empty($user)) {\\n\\t$user = array_map(\'trim\', explode(\',\', $user));\\n\\t$user_id = $user_username = array();\\n\\tforeach ($user as $v) {\\n\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t$user_id[] = $v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$user_username[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($user_id) && !empty($user_username)) {\\n\\t\\t$where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\', $user_username) . \'\\\\\'))\';\\n\\t}\\n\\telse {\\n\\t\\tif (!empty($user_id)) {\\n\\t\\t\\t$where[\'User.id:IN\'] = $user_id;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\tif (!empty($user_username)) {\\n\\t\\t\\t\\t$where[\'User.username:IN\'] = $user_username;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n\\/\\/ Joining tables\\n$leftJoin = array(\\n\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\n\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `User`.`id`\'),\\n);\\nif ($Tickets->authenticated) {\\n\\t$leftJoin[\'Vote\'] = array(\\n\\t\\t\'class\' => \'TicketVote\',\\n\\t\\t\'on\' => \'`Vote`.`id` = `Ticket`.`id` AND `Vote`.`class` = \\"Ticket\\" AND `Vote`.`createdby` = \' . $modx->user->id\\n\\t);\\n\\t$leftJoin[\'Star\'] = array(\\n\\t\\t\'class\' => \'TicketStar\',\\n\\t\\t\'on\' => \'`Star`.`id` = `Ticket`.`id` AND `Star`.`class` = \\"Ticket\\" AND `Star`.`createdby` = \' . $modx->user->id\\n\\t);\\n}\\n\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\n\\t\'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\n\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns($class, $class)\\n\\t\\t: $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\n);\\nif ($Tickets->authenticated) {\\n\\t$select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\n\\t$select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => \'createdon\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t? \'ids\'\\n\\t\\t: \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\nif (!empty($returnIds)) {\\n\\treturn $rows;\\n}\\n\\n\\/\\/ Processing rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Handle properties\\n\\t\\t$properties = is_string($row[\'properties\'])\\n\\t\\t\\t? $modx->fromJSON($row[\'properties\'])\\n\\t\\t\\t: $row[\'properties\'];\\n\\t\\tif (!empty($properties[\'tickets\'])) {\\n\\t\\t\\t$properties = $properties[\'tickets\'];\\n\\t\\t}\\n\\t\\tif (empty($properties[\'process_tags\'])) {\\n\\t\\t\\tforeach ($row as $field => $value) {\\n\\t\\t\\t\\t$row[$field] = str_replace(array(\'[\', \']\'), array(\'&#91;\', \'&#93;\'), $value);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif (!is_array($properties)) {\\n\\t\\t\\t$properties = array();\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Handle rating\\n\\t\\t$row[\'rating\'] = $row[\'rating_total\'] = array_key_exists(\'rating\', $properties)\\n\\t\\t\\t? $properties[\'rating\']\\n\\t\\t\\t: 0;\\n\\t\\t$row[\'rating_plus\'] = array_key_exists(\'rating_plus\', $properties)\\n\\t\\t\\t? $properties[\'rating_plus\']\\n\\t\\t\\t: 0;\\n\\t\\t$row[\'rating_minus\'] = array_key_exists(\'rating_minus\', $properties)\\n\\t\\t\\t? $properties[\'rating_minus\']\\n\\t\\t\\t: 0;\\n\\t\\tif ($row[\'rating\'] > 0) {\\n\\t\\t\\t$row[\'rating\'] = \'+\' . $row[\'rating\'];\\n\\t\\t\\t$row[\'rating_positive\'] = 1;\\n\\t\\t}\\n\\t\\telseif ($row[\'rating\'] < 0) {\\n\\t\\t\\t$row[\'rating_negative\'] = 1;\\n\\t\\t}\\n\\n\\t\\tif (!$Tickets->authenticated || $modx->user->id == $row[\'createdby\']) {\\n\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t}\\n\\t\\telseif (array_key_exists(\'vote\', $row)) {\\n\\t\\t\\tif ($row[\'vote\'] == \'\') {\\n\\t\\t\\t\\t$row[\'can_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\telseif ($row[\'vote\'] > 0) {\\n\\t\\t\\t\\t$row[\'voted_plus\'] = 1;\\n\\t\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\telseif ($row[\'vote\'] < 0) {\\n\\t\\t\\t\\t$row[\'voted_minus\'] = 1;\\n\\t\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$row[\'voted_none\'] = 1;\\n\\t\\t\\t\\t$row[\'cant_vote\'] = 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t$row[\'active\'] = (int)!empty($row[\'can_vote\']);\\n\\t\\t$row[\'inactive\'] = (int)!empty($row[\'cant_vote\']);\\n\\n\\t\\t$row[\'can_star\'] = $Tickets->authenticated;\\n\\t\\t$row[\'stared\'] = !empty($row[\'star\']);\\n\\t\\t$row[\'unstared\'] = empty($row[\'star\']);\\n\\n\\t\\t\\/\\/ Adding fields to row\\n\\t\\t$additional_fields = $pdoFetch->getObject(\'Ticket\', $row[\'id\'], array(\\n\\t\\t\\t\'leftJoin\' => array(\\n\\t\\t\\t\\t\'View\' => array(\'class\' => \'TicketView\', \'on\' => \'`Ticket`.`id` = `View`.`parent`\'),\\n\\t\\t\\t\\t\'Thread\' => array(\'class\' => \'TicketThread\', \'on\' => \'`Thread`.`resource` = `Ticket`.`id`  AND `Thread`.`deleted` = 0\'),\\n\\t\\t\\t),\\n\\t\\t\\t\'select\' => array(\\n\\t\\t\\t\\t\'View\' => \'COUNT(`View`.`parent`) as `views`\',\\n\\t\\t\\t\\t\'Thread\' => \'`Thread`.`id` as `thread`\',\\n\\t\\t\\t),\\n\\t\\t\\t\'groupby\' => $class . \'.id\'\\n\\t\\t));\\n\\t\\t$row = array_merge($row, $additional_fields);\\n\\t\\t$row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\n\\t\\t$row[\'comments\'] = $modx->getCount(\'TicketComment\', array(\'published\' => 1, \'thread\' => $row[\'thread\']));\\n\\t\\t$row[\'stars\'] = $modx->getCount(\'TicketStar\', array(\'id\' => $row[\'id\'], \'class\' => \'Ticket\'));\\n\\t\\t\\/\\/ Special fields for quick placeholders\\n\\t\\t$row[\'isauthor\'] = $modx->user->id == $row[\'createdby\'];\\n\\t\\t$row[\'unpublished\'] = empty($row[\'published\']);\\n\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t\\/\\/ Processing new comments\\n\\t\\tif ($Tickets->authenticated) {\\n\\t\\t\\t$last_view = $pdoFetch->getObject(\'TicketView\', array(\\n\\t\\t\\t\\t\'parent\' => $row[\'id\'],\\n\\t\\t\\t\\t\'uid\' => $modx->user->id,\\n\\t\\t\\t), array(\\n\\t\\t\\t\\t\'sortby\' => \'timestamp\',\\n\\t\\t\\t\\t\'sortdir\' => \'DESC\',\\n\\t\\t\\t\\t\'limit\' => 1,\\n\\t\\t\\t));\\n\\t\\t\\tif (!empty($last_view[\'timestamp\'])) {\\n\\t\\t\\t\\t$row[\'new_comments\'] = $modx->getCount(\'TicketComment\', array(\\n\\t\\t\\t\\t\\t\'published\' => 1,\\n\\t\\t\\t\\t\\t\'thread\' => $row[\'thread\'],\\n\\t\\t\\t\\t\\t\'createdon:>\' => $last_view[\'timestamp\'],\\n\\t\\t\\t\\t\\t\'createdby:!=\' => $modx->user->id,\\n\\t\\t\\t\\t));\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$row[\'new_comments\'] = $row[\'comments\'];\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$row[\'new_comments\'] = \'\';\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Processing chunk\\n\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] = empty($tpl)\\n\\t\\t\\t? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n\\t\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Returning processed chunks\');\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"getTicketsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (empty($outputSeparator)) {\\n\\t\\t$outputSeparator = \\"\\\\n\\";\\n\\t}\\n\\t$output = implode($outputSeparator, $output);\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$array = array(\'output\' => $output);\\n\\t\\tif ($Tickets->authenticated && $modx->resource->class_key == \'TicketsSection\') {\\n\\t\\t\\t\\/** @var TicketsSection $section *\\/\\n\\t\\t\\t$section = &$modx->resource;\\n\\t\\t\\t$array[\'subscribed\'] = $section->isSubscribed();\\n\\t\\t}\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, $array, $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => '1cb78f0cbc494af1991ec0c313c61178',
        'native_key' => NULL,
        'signature' => 'aad73d8392b7a8ed37e44aae2b3efca7',
      ),
      '51d307829fb801f83e45607cb669f569' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getTicketsSections","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (isset($parents) && $parents === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\n\\n$class = \'TicketsSection\';\\n$where = array(\'class_key\' => $class);\\n\\n\\/\\/ Adding custom where parameters\\nif (!empty($scriptProperties[\'where\'])) {\\n\\t$tmp = $modx->fromJSON($scriptProperties[\'where\']);\\n\\tif (is_array($tmp)) {\\n\\t\\t$where = array_merge($where, $tmp);\\n\\t}\\n}\\nunset($scriptProperties[\'where\']);\\n$pdoFetch->addTime(\'\\"Where\\" expression built.\');\\n\\n\\/\\/ Joining tables\\n$leftJoin = array(\\n\\t\'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'Ticket.parent=TicketsSection.id AND Ticket.published=1 AND Ticket.deleted=0 AND Ticket.class_key=\\"Ticket\\"\'),\\n\\t\'View\' => array(\'class\' => \'TicketView\', \'on\' => \'Ticket.id=View.parent\'),\\n\\t\\/\\/\'TicketVote\' => array(\'class\' => \'TicketVote\', \'on\' => \'icket.id=Vote.parent AND Vote.class=\\"Ticket\\"\'),\\n);\\n\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'TicketsSection\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns($class, $class)\\n\\t\\t: $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\n\\t\'Ticket\' => \'COUNT(DISTINCT `Ticket`.`id`) as `tickets`\',\\n\\t\'View\' => \'COUNT(`View`.`parent`) as `views`\',\\n\\t\\/\\/,\'Vote\' => \'SUM(DISTINCT `Vote`.`value`) as `votes`\'\\n);\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'sortby\' => \'views\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t? \'ids\'\\n\\t\\t: \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\nif (!empty($returnIds)) {\\n\\treturn $rows;\\n}\\n\\n\\/\\/ Processing rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$add = $pdoFetch->getObject(\'TicketThread\', array(\'deleted\' => 0), array(\\n\\t\\t\\t\'innerJoin\' => array(\\n\\t\\t\\t\\t\'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'Ticket.id = TicketThread.resource AND Ticket.published=1 AND Ticket.deleted=0 AND Ticket.class_key=\\"Ticket\\" AND Ticket.parent=\' . $row[\'id\']),\\n\\t\\t\\t),\\n\\t\\t\\t\'select\' => array(\\n\\t\\t\\t\\t\'TicketThread\' => \'SUM(TicketThread.comments) as `comments`\'\\n\\t\\t\\t)\\n\\t\\t));\\n\\n\\t\\t$row[\'comments\'] = !empty($add[\'comments\'])\\n\\t\\t\\t? $add[\'comments\']\\n\\t\\t\\t: 0;\\n\\t\\t$row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\n\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t\\/\\/ Processing chunk\\n\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] = empty($tpl)\\n\\t\\t\\t? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n\\t\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Returning processed chunks\');\\nif (empty($outputSeparator)) {\\n\\t$outputSeparator = \\"\\\\n\\";\\n}\\n$output = implode($outputSeparator, $output);\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"getSectionsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:19:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"tpl.Tickets.sections.row\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:18:\\"tickets_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:19:\\"tickets_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"views\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:23:\\"tickets_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:23:\\"tickets_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_sections.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (isset($parents) && $parents === \'\') {\\n\\t$scriptProperties[\'parents\'] = $modx->resource->id;\\n}\\n\\n$class = \'TicketsSection\';\\n$where = array(\'class_key\' => $class);\\n\\n\\/\\/ Adding custom where parameters\\nif (!empty($scriptProperties[\'where\'])) {\\n\\t$tmp = $modx->fromJSON($scriptProperties[\'where\']);\\n\\tif (is_array($tmp)) {\\n\\t\\t$where = array_merge($where, $tmp);\\n\\t}\\n}\\nunset($scriptProperties[\'where\']);\\n$pdoFetch->addTime(\'\\"Where\\" expression built.\');\\n\\n\\/\\/ Joining tables\\n$leftJoin = array(\\n\\t\'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'Ticket.parent=TicketsSection.id AND Ticket.published=1 AND Ticket.deleted=0 AND Ticket.class_key=\\"Ticket\\"\'),\\n\\t\'View\' => array(\'class\' => \'TicketView\', \'on\' => \'Ticket.id=View.parent\'),\\n\\t\\/\\/\'TicketVote\' => array(\'class\' => \'TicketVote\', \'on\' => \'icket.id=Vote.parent AND Vote.class=\\"Ticket\\"\'),\\n);\\n\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'TicketsSection\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns($class, $class)\\n\\t\\t: $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\n\\t\'Ticket\' => \'COUNT(DISTINCT `Ticket`.`id`) as `tickets`\',\\n\\t\'View\' => \'COUNT(`View`.`parent`) as `views`\',\\n\\t\\/\\/,\'Vote\' => \'SUM(DISTINCT `Vote`.`value`) as `votes`\'\\n);\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'sortby\' => \'views\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t? \'ids\'\\n\\t\\t: \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\nif (!empty($returnIds)) {\\n\\treturn $rows;\\n}\\n\\n\\/\\/ Processing rows\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$add = $pdoFetch->getObject(\'TicketThread\', array(\'deleted\' => 0), array(\\n\\t\\t\\t\'innerJoin\' => array(\\n\\t\\t\\t\\t\'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'Ticket.id = TicketThread.resource AND Ticket.published=1 AND Ticket.deleted=0 AND Ticket.class_key=\\"Ticket\\" AND Ticket.parent=\' . $row[\'id\']),\\n\\t\\t\\t),\\n\\t\\t\\t\'select\' => array(\\n\\t\\t\\t\\t\'TicketThread\' => \'SUM(TicketThread.comments) as `comments`\'\\n\\t\\t\\t)\\n\\t\\t));\\n\\n\\t\\t$row[\'comments\'] = !empty($add[\'comments\'])\\n\\t\\t\\t? $add[\'comments\']\\n\\t\\t\\t: 0;\\n\\t\\t$row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\n\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t\\/\\/ Processing chunk\\n\\t\\t$tpl = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] = empty($tpl)\\n\\t\\t\\t? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n\\t\\t\\t: $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Returning processed chunks\');\\nif (empty($outputSeparator)) {\\n\\t$outputSeparator = \\"\\\\n\\";\\n}\\n$output = implode($outputSeparator, $output);\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"getSectionsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => 'd65675f92c992856fa3520aeda2816d2',
        'native_key' => NULL,
        'signature' => 'cdf351b47af078a56eed2af04e23fb86',
      ),
      '2c14616ceb5fe8c74cda1435571a13cd' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getComments","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.Tickets.comment.list.row\');\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\n\\n\\/\\/ Define threads of comments\\nif (!empty($parents) || !empty($resources) || !empty($threads)) {\\n\\t$where = array();\\n\\t$options = array(\\n\\t\\t\'innerJoin\' => array(\\n\\t\\t\\t\'Thread\' => array(\\n\\t\\t\\t\\t\'class\' => \'TicketThread\',\\n\\t\\t\\t\\t\'on\' => \'`Ticket`.`id` = `Thread`.`resource`\',\\n\\t\\t\\t)\\n\\t\\t),\\n\\t\\t\'groupby\' => \'`Ticket`.`id`\',\\n\\t\\t\'select\' => array(\'Thread\' => \'`Thread`.`id`\'),\\n\\t\\t\'showUnpublished\' => !empty($showUnpublished),\\n\\t\\t\'showDeleted\' => !empty($showDeleted),\\n\\t\\t\'depth\' => isset($depth)\\n\\t\\t\\t? (int)$depth\\n\\t\\t\\t: 10,\\n\\t);\\n\\tif (!empty($parents)) {\\n\\t\\t$options[\'parents\'] = $parents;\\n\\t}\\n\\tif (!empty($resources)) {\\n\\t\\t$options[\'resources\'] = $resources;\\n\\t}\\n\\tif (!empty($threads)) {\\n\\t\\t$threads = array_map(\'trim\', explode(\',\', $threads));\\n\\t\\t$threads_in = $threads_out = array();\\n\\t\\tforeach ($threads as $v) {\\n\\t\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\t\\tcontinue;\\n\\t\\t\\t}\\n\\t\\t\\tif ($v[0] == \'-\') {\\n\\t\\t\\t\\t$threads_out[] = abs($v);\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$threads_in[] = abs($v);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif (!empty($threads_in)) {\\n\\t\\t\\t$where[\'Thread.id:IN\'] = $threads_in;\\n\\t\\t}\\n\\t\\tif (!empty($threads_out)) {\\n\\t\\t\\t$where[\'Thread.id:NOT IN\'] = $threads_out;\\n\\t\\t}\\n\\t}\\n\\n\\t$rows = $pdoFetch->getCollection(\'Ticket\', $where, $options);\\n\\t$threads = array();\\n\\tforeach ($rows as $item) {\\n\\t\\t$threads[] = $item[\'id\'];\\n\\t}\\n}\\n\\n\\/\\/ Prepare query to db\\n$class = \'TicketComment\';\\n$where = array();\\nif (empty($showUnpublished)) {\\n\\t$where[\'published\'] = 1;\\n}\\nif (empty($showDeleted)) {\\n\\t$where[\'deleted\'] = 0;\\n}\\n\\n\\/\\/ Filter by user\\nif (!empty($user)) {\\n\\t$user = array_map(\'trim\', explode(\',\', $user));\\n\\t$user_id = $user_username = array();\\n\\tforeach ($user as $v) {\\n\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t$user_id[] = $v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$user_username[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($user_id) && !empty($user_username)) {\\n\\t\\t$where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\', $user_username) . \'\\\\\'))\';\\n\\t}\\n\\telseif (!empty($user_id)) {\\n\\t\\t$where[\'User.id:IN\'] = $user_id;\\n\\t}\\n\\telseif (!empty($user_username)) {\\n\\t\\t$where[\'User.username:IN\'] = $user_username;\\n\\t}\\n}\\n\\/\\/ Filter by threads\\nif (!empty($threads)) {\\n\\t$where[\'thread:IN\'] = $threads;\\n}\\n\\/\\/ Filter by comments\\nif (!empty($comments)) {\\n\\t$comments = array_map(\'trim\', explode(\',\', $comments));\\n\\t$comments_in = $comments_out = array();\\n\\tforeach ($comments as $v) {\\n\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\tif ($v[0] == \'-\') {\\n\\t\\t\\t$comments_out[] = abs($v);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$comments_in[] = abs($v);\\n\\t\\t}\\n\\t}\\n\\tif (!empty($comments_in)) {\\n\\t\\t$where[\'id:IN\'] = $comments_in;\\n\\t}\\n\\tif (!empty($comments_out)) {\\n\\t\\t$where[\'id:NOT IN\'] = $comments_out;\\n\\t}\\n}\\n\\n\\/\\/ Joining tables\\n$innerJoin = array(\\n\\t\'Thread\' => array(\\n\\t\\t\'class\' => \'TicketThread\',\\n\\t\\t\'on\' => \'`Thread`.`id` = `TicketComment`.`thread`\'\\n\\t)\\n);\\n$leftJoin = array(\\n\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\n\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\n\\t\'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\'),\\n\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n);\\nif ($Tickets->authenticated) {\\n\\t$leftJoin[\'Vote\'] = array(\\n\\t\\t\'class\' => \'TicketVote\',\\n\\t\\t\'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id\\n\\t);\\n\\t$leftJoin[\'Star\'] = array(\\n\\t\\t\'class\' => \'TicketStar\',\\n\\t\\t\'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id\\n\\t);\\n}\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true) . \', `rating` as `rating_total`\',\\n\\t\'Thread\' => \'`Thread`.`resource`\',\\n\\t\'User\' => \'`User`.`username`\',\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'), true) . \',`Profile`.`email` as `user_email`\',\\n\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\n\\t\\t: $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true),\\n\\t\'Section\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\')\\n\\t\\t: $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\n);\\nif ($Tickets->authenticated) {\\n\\t$select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\n\\t$select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => $class . \'.createdon\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'fastMode\' => true,\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\n$rows = $pdoFetch->run();\\n\\n$output = array();\\nif (!empty($rows)) {\\n\\tforeach ($rows as $row) {\\n\\t\\t$row[\'comments\'] = $modx->getCount(\'TicketComment\', array(\'published\' => 1, \'thread\' => $row[\'thread\']));;\\n\\t\\t$output[] = $Tickets->templateNode($row, $tpl);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Returning processed chunks\');\\n$output = implode($outputSeparator, $output);\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"getCommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:15:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.Tickets.comment.list.row\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplCommentDeleted\\";a:7:{s:4:\\"name\\";s:17:\\"tplCommentDeleted\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplCommentDeleted\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.one.deleted\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"threads\\";a:7:{s:4:\\"name\\";s:7:\\"threads\\";s:4:\\"desc\\";s:20:\\"tickets_prop_threads\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_comments.php","content":"\\/* @var array $scriptProperties *\\/\\n\\/* @var Tickets $Tickets *\\/\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null, $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\n\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n\\t$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n\\treturn false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.Tickets.comment.list.row\');\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\n\\n\\/\\/ Define threads of comments\\nif (!empty($parents) || !empty($resources) || !empty($threads)) {\\n\\t$where = array();\\n\\t$options = array(\\n\\t\\t\'innerJoin\' => array(\\n\\t\\t\\t\'Thread\' => array(\\n\\t\\t\\t\\t\'class\' => \'TicketThread\',\\n\\t\\t\\t\\t\'on\' => \'`Ticket`.`id` = `Thread`.`resource`\',\\n\\t\\t\\t)\\n\\t\\t),\\n\\t\\t\'groupby\' => \'`Ticket`.`id`\',\\n\\t\\t\'select\' => array(\'Thread\' => \'`Thread`.`id`\'),\\n\\t\\t\'showUnpublished\' => !empty($showUnpublished),\\n\\t\\t\'showDeleted\' => !empty($showDeleted),\\n\\t\\t\'depth\' => isset($depth)\\n\\t\\t\\t? (int)$depth\\n\\t\\t\\t: 10,\\n\\t);\\n\\tif (!empty($parents)) {\\n\\t\\t$options[\'parents\'] = $parents;\\n\\t}\\n\\tif (!empty($resources)) {\\n\\t\\t$options[\'resources\'] = $resources;\\n\\t}\\n\\tif (!empty($threads)) {\\n\\t\\t$threads = array_map(\'trim\', explode(\',\', $threads));\\n\\t\\t$threads_in = $threads_out = array();\\n\\t\\tforeach ($threads as $v) {\\n\\t\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\t\\tcontinue;\\n\\t\\t\\t}\\n\\t\\t\\tif ($v[0] == \'-\') {\\n\\t\\t\\t\\t$threads_out[] = abs($v);\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$threads_in[] = abs($v);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tif (!empty($threads_in)) {\\n\\t\\t\\t$where[\'Thread.id:IN\'] = $threads_in;\\n\\t\\t}\\n\\t\\tif (!empty($threads_out)) {\\n\\t\\t\\t$where[\'Thread.id:NOT IN\'] = $threads_out;\\n\\t\\t}\\n\\t}\\n\\n\\t$rows = $pdoFetch->getCollection(\'Ticket\', $where, $options);\\n\\t$threads = array();\\n\\tforeach ($rows as $item) {\\n\\t\\t$threads[] = $item[\'id\'];\\n\\t}\\n}\\n\\n\\/\\/ Prepare query to db\\n$class = \'TicketComment\';\\n$where = array();\\nif (empty($showUnpublished)) {\\n\\t$where[\'published\'] = 1;\\n}\\nif (empty($showDeleted)) {\\n\\t$where[\'deleted\'] = 0;\\n}\\n\\n\\/\\/ Filter by user\\nif (!empty($user)) {\\n\\t$user = array_map(\'trim\', explode(\',\', $user));\\n\\t$user_id = $user_username = array();\\n\\tforeach ($user as $v) {\\n\\t\\tif (is_numeric($v)) {\\n\\t\\t\\t$user_id[] = $v;\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$user_username[] = $v;\\n\\t\\t}\\n\\t}\\n\\tif (!empty($user_id) && !empty($user_username)) {\\n\\t\\t$where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\', $user_username) . \'\\\\\'))\';\\n\\t}\\n\\telseif (!empty($user_id)) {\\n\\t\\t$where[\'User.id:IN\'] = $user_id;\\n\\t}\\n\\telseif (!empty($user_username)) {\\n\\t\\t$where[\'User.username:IN\'] = $user_username;\\n\\t}\\n}\\n\\/\\/ Filter by threads\\nif (!empty($threads)) {\\n\\t$where[\'thread:IN\'] = $threads;\\n}\\n\\/\\/ Filter by comments\\nif (!empty($comments)) {\\n\\t$comments = array_map(\'trim\', explode(\',\', $comments));\\n\\t$comments_in = $comments_out = array();\\n\\tforeach ($comments as $v) {\\n\\t\\tif (!is_numeric($v)) {\\n\\t\\t\\tcontinue;\\n\\t\\t}\\n\\t\\tif ($v[0] == \'-\') {\\n\\t\\t\\t$comments_out[] = abs($v);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$comments_in[] = abs($v);\\n\\t\\t}\\n\\t}\\n\\tif (!empty($comments_in)) {\\n\\t\\t$where[\'id:IN\'] = $comments_in;\\n\\t}\\n\\tif (!empty($comments_out)) {\\n\\t\\t$where[\'id:NOT IN\'] = $comments_out;\\n\\t}\\n}\\n\\n\\/\\/ Joining tables\\n$innerJoin = array(\\n\\t\'Thread\' => array(\\n\\t\\t\'class\' => \'TicketThread\',\\n\\t\\t\'on\' => \'`Thread`.`id` = `TicketComment`.`thread`\'\\n\\t)\\n);\\n$leftJoin = array(\\n\\t\'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\n\\t\'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\n\\t\'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\'),\\n\\t\'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\n);\\nif ($Tickets->authenticated) {\\n\\t$leftJoin[\'Vote\'] = array(\\n\\t\\t\'class\' => \'TicketVote\',\\n\\t\\t\'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id\\n\\t);\\n\\t$leftJoin[\'Star\'] = array(\\n\\t\\t\'class\' => \'TicketStar\',\\n\\t\\t\'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id\\n\\t);\\n}\\n\\/\\/ Fields to select\\n$select = array(\\n\\t\'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true) . \', `rating` as `rating_total`\',\\n\\t\'Thread\' => \'`Thread`.`resource`\',\\n\\t\'User\' => \'`User`.`username`\',\\n\\t\'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'), true) . \',`Profile`.`email` as `user_email`\',\\n\\t\'Ticket\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\n\\t\\t: $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true),\\n\\t\'Section\' => !empty($includeContent)\\n\\t\\t? $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\')\\n\\t\\t: $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\n);\\nif ($Tickets->authenticated) {\\n\\t$select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\n\\t$select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\'where\' => $modx->toJSON($where),\\n\\t\'innerJoin\' => $modx->toJSON($innerJoin),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'sortby\' => $class . \'.createdon\',\\n\\t\'sortdir\' => \'DESC\',\\n\\t\'groupby\' => $class . \'.id\',\\n\\t\'fastMode\' => true,\\n\\t\'return\' => \'data\',\\n\\t\'nestedChunkPrefix\' => \'tickets_\',\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\n$rows = $pdoFetch->run();\\n\\n$output = array();\\nif (!empty($rows)) {\\n\\tforeach ($rows as $row) {\\n\\t\\t$row[\'comments\'] = $modx->getCount(\'TicketComment\', array(\'published\' => 1, \'thread\' => $row[\'thread\']));;\\n\\t\\t$output[] = $Tickets->templateNode($row, $tpl);\\n\\t}\\n}\\n$pdoFetch->addTime(\'Returning processed chunks\');\\n$output = implode($outputSeparator, $output);\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log .= \'<pre class=\\"getCommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$output[\'log\'] = $log;\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\t$output .= $log;\\n\\n\\tif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t\\t$output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\n\\t}\\n\\n\\tif (!empty($toPlaceholder)) {\\n\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t}\\n\\telse {\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => '4e17f00bc55618e0a4416f8ef68c6107',
        'native_key' => NULL,
        'signature' => 'a6ee339ba2d17bbd54299bd21af0b4fc',
      ),
      '0a2a69e8b429f03c7242e14bfd8ca6ff' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getStars","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\nif (empty($class)) {\\n\\t$class = \'Ticket\';\\n}\\n\\/** @var integer $user *\\/\\nif (empty($user)) {\\n\\t$user = $modx->user->get(\'id\');\\n}\\nunset($scriptProperties[\'user\']);\\n\\n$ids = array();\\n$q = $modx->newQuery(\'TicketStar\', array(\'class\' => $class, \'createdby\' => $user));\\n$q->select(\'id\');\\n$tstart = microtime(true);\\nif ($q->prepare() && $q->stmt->execute()) {\\n\\t$modx->queryTime = microtime(true) - $tstart;\\n\\t$modx->executedQueries++;\\n\\n\\t$ids = $q->stmt->fetchAll(PDO::FETCH_COLUMN);\\n}\\n\\nif (empty($ids)) {\\n\\treturn false;\\n}\\n\\n$where = array($class . \'.id:IN\' => $ids);\\nif (!empty($scriptProperties[\'where\'])) {\\n\\t$tmp = $modx->fromJSON($scriptProperties[\'where\']);\\n\\tif (is_array($tmp)) {\\n\\t\\t$where = array_merge($where, $tmp);\\n\\t}\\n}\\n$scriptProperties[\'where\'] = $modx->toJSON($where);\\nif (empty($parents)) {\\n\\t$scriptProperties[\'parents\'] = 0;\\n}\\nif (empty($tpl)) {\\n\\tunset($scriptProperties[\'tpl\']);\\n}\\n\\nreturn $class == \'Ticket\'\\n\\t? $modx->runSnippet(\'getTickets\', $scriptProperties)\\n\\t: $modx->runSnippet(\'getComments\', $scriptProperties);","locked":0,"properties":"a:2:{s:5:\\"class\\";a:7:{s:4:\\"name\\";s:5:\\"class\\";s:4:\\"desc\\";s:18:\\"tickets_prop_class\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:6:\\"Ticket\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_stars.php","content":"\\/** @var array $scriptProperties *\\/\\nif (empty($class)) {\\n\\t$class = \'Ticket\';\\n}\\n\\/** @var integer $user *\\/\\nif (empty($user)) {\\n\\t$user = $modx->user->get(\'id\');\\n}\\nunset($scriptProperties[\'user\']);\\n\\n$ids = array();\\n$q = $modx->newQuery(\'TicketStar\', array(\'class\' => $class, \'createdby\' => $user));\\n$q->select(\'id\');\\n$tstart = microtime(true);\\nif ($q->prepare() && $q->stmt->execute()) {\\n\\t$modx->queryTime = microtime(true) - $tstart;\\n\\t$modx->executedQueries++;\\n\\n\\t$ids = $q->stmt->fetchAll(PDO::FETCH_COLUMN);\\n}\\n\\nif (empty($ids)) {\\n\\treturn false;\\n}\\n\\n$where = array($class . \'.id:IN\' => $ids);\\nif (!empty($scriptProperties[\'where\'])) {\\n\\t$tmp = $modx->fromJSON($scriptProperties[\'where\']);\\n\\tif (is_array($tmp)) {\\n\\t\\t$where = array_merge($where, $tmp);\\n\\t}\\n}\\n$scriptProperties[\'where\'] = $modx->toJSON($where);\\nif (empty($parents)) {\\n\\t$scriptProperties[\'parents\'] = 0;\\n}\\nif (empty($tpl)) {\\n\\tunset($scriptProperties[\'tpl\']);\\n}\\n\\nreturn $class == \'Ticket\'\\n\\t? $modx->runSnippet(\'getTickets\', $scriptProperties)\\n\\t: $modx->runSnippet(\'getComments\', $scriptProperties);"}',
        'guid' => '64b7a1c674e8ea08b67d7e2d3047f5ce',
        'native_key' => NULL,
        'signature' => '233ecb3247055e7ddbdbe7606f2a929b',
      ),
    ),
    'Plugins' => 
    array (
      '702b9f8fa9a97f4c72320d00420d3aee' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"Tickets","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"switch ($modx->event->name) {\\n\\n\\tcase \'OnSiteRefresh\':\\n\\t\\tif ($modx->cacheManager->refresh(array(\'default\\/tickets\' => array()))) {\\n\\t\\t\\t$modx->log(modX::LOG_LEVEL_INFO, $modx->lexicon(\'refresh_default\') . \': Tickets\');\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnDocFormSave\':\\n\\t\\t\\/* @var Ticket $resource *\\/\\n\\t\\tif ($mode == \'new\' && $resource->class_key == \\"Ticket\\") {\\n\\t\\t\\t$modx->cacheManager->delete(\'tickets\\/latest.tickets\');\\n\\t\\t}\\n\\t\\t\\/* @var TicketsSection $resource *\\/\\n\\t\\tif ($mode == \'upd\' && $resource->class_key == \'TicketsSection\') {\\n\\t\\t\\tif (method_exists($resource, \'clearCache\')) {\\n\\t\\t\\t\\t$resource->clearCache();\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnWebPagePrerender\':\\n\\t\\t$output = &$modx->resource->_output;\\n\\t\\t$output = str_replace(array(\'*{*{*{*{*{*\', \'*}*}*}*}*}*\'), array(\'[\', \']\'), $output);\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnPageNotFound\':\\n\\t\\t\\/\\/ It is working only with friendly urls enabled\\n\\t\\t$q = trim(@$_REQUEST[$modx->context->getOption(\'request_param_alias\', \'q\')]);\\n\\t\\t$matches = explode(\'\\/\', rtrim($q, \'\\/\'));\\n\\t\\tif (count($matches) < 2) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\t$ticket_uri = array_pop($matches);\\n\\t\\t$section_uri = implode(\'\\/\', $matches) . \'\\/\';\\n\\n\\t\\tif ($section_id = $modx->findResource($section_uri)) {\\n\\t\\t\\t\\/** @var TicketsSection $section *\\/\\n\\t\\t\\tif ($section = $modx->getObject(\'TicketsSection\', $section_id)) {\\n\\t\\t\\t\\tif (is_numeric($ticket_uri)) {\\n\\t\\t\\t\\t\\t$ticket_id = $ticket_uri;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telseif (preg_match(\'#^\\\\d+#\', $ticket_uri, $tmp)) {\\n\\t\\t\\t\\t\\t$ticket_id = $tmp[0];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$properties = $section->getProperties(\'tickets\');\\n\\t\\t\\t\\t\\tif (!empty($properties[\'uri\']) && strpos($properties[\'uri\'], \'%id\') !== false) {\\n\\t\\t\\t\\t\\t\\t$pcre = str_replace(\'%id\', \'([0-9]+)\', $properties[\'uri\']);\\n\\t\\t\\t\\t\\t\\t$pcre = preg_replace(\'#(\\\\%[a-z]+)#\', \'(?:.*?)\', $pcre);\\n\\t\\t\\t\\t\\t\\tif (preg_match($pcre, $ticket_uri, $matches)) {\\n\\t\\t\\t\\t\\t\\t\\t$ticket_id = $matches[1];\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (!empty($ticket_id)) {\\n\\t\\t\\t\\t\\tif ($ticket = $modx->getObject(\'Ticket\', array(\'id\' => $ticket_id, \'deleted\' => 0))) {\\n\\t\\t\\t\\t\\t\\tif ($ticket->published) {\\n\\t\\t\\t\\t\\t\\t\\t$modx->sendRedirect($modx->makeUrl($ticket_id), array(\'responseCode\' => \'HTTP\\/1.1 301 Moved Permanently\'));\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\telseif ($unp_id = $modx->getOption(\'tickets.unpublished_ticket_page\')) {\\n\\t\\t\\t\\t\\t\\t\\t$modx->sendForward($unp_id);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnLoadWebDocument\':\\n\\t\\t$authenticated = $modx->user->isAuthenticated($modx->context->get(\'key\'));\\n\\t\\t$key = \'Tickets_User\';\\n\\n\\t\\tif (!$authenticated && !$modx->getOption(\'tickets.count_guests\', false)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (empty($_COOKIE[$key])) {\\n\\t\\t\\tif (!empty($_SESSION[$key])) {\\n\\t\\t\\t\\t$guest_key = $_SESSION[$key];\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$guest_key = $_SESSION[$key] = md5(rand() . time() . rand());\\n\\t\\t\\t}\\n\\t\\t\\tsetcookie($key, $guest_key, time() + (86400 * 365), \'\\/\');\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$guest_key = $_COOKIE[$key];\\n\\t\\t}\\n\\n\\t\\tif (empty($_SESSION[$key])) {\\n\\t\\t\\t$_SESSION[$key] = $guest_key;\\n\\t\\t}\\n\\n\\t\\tif ($authenticated) {\\n\\t\\t\\t\\/** @var TicketAuthor $profile *\\/\\n\\t\\t\\tif (!$profile = $modx->user->getOne(\'AuthorProfile\')) {\\n\\t\\t\\t\\t$profile = $modx->newObject(\'TicketAuthor\');\\n\\t\\t\\t\\t$modx->user->addOne($profile);\\n\\t\\t\\t}\\n\\t\\t\\t$profile->set(\'visitedon\', time());\\n\\t\\t\\t$profile->save();\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnWebPageComplete\':\\n\\t\\t\\/** @var Tickets $Tickets *\\/\\n\\t\\t$Tickets = $modx->getService(\'tickets\');\\n\\t\\t$Tickets->logView($modx->resource->get(\'id\'));\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnUserSave\':\\n\\t\\t\\/** @var modUser $user *\\/\\n\\t\\tif ($mode == \'new\' && $user && !$user->getOne(\'AuthorProfile\')) {\\n\\t\\t\\t$profile = $modx->newObject(\'TicketAuthor\');\\n\\t\\t\\t$user->addOne($profile);\\n\\t\\t\\t$profile->save();\\n\\t\\t}\\n\\t\\tbreak;\\n\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/plugins\\/plugin.tickets.php","content":"switch ($modx->event->name) {\\n\\n\\tcase \'OnSiteRefresh\':\\n\\t\\tif ($modx->cacheManager->refresh(array(\'default\\/tickets\' => array()))) {\\n\\t\\t\\t$modx->log(modX::LOG_LEVEL_INFO, $modx->lexicon(\'refresh_default\') . \': Tickets\');\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnDocFormSave\':\\n\\t\\t\\/* @var Ticket $resource *\\/\\n\\t\\tif ($mode == \'new\' && $resource->class_key == \\"Ticket\\") {\\n\\t\\t\\t$modx->cacheManager->delete(\'tickets\\/latest.tickets\');\\n\\t\\t}\\n\\t\\t\\/* @var TicketsSection $resource *\\/\\n\\t\\tif ($mode == \'upd\' && $resource->class_key == \'TicketsSection\') {\\n\\t\\t\\tif (method_exists($resource, \'clearCache\')) {\\n\\t\\t\\t\\t$resource->clearCache();\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnWebPagePrerender\':\\n\\t\\t$output = &$modx->resource->_output;\\n\\t\\t$output = str_replace(array(\'*{*{*{*{*{*\', \'*}*}*}*}*}*\'), array(\'[\', \']\'), $output);\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnPageNotFound\':\\n\\t\\t\\/\\/ It is working only with friendly urls enabled\\n\\t\\t$q = trim(@$_REQUEST[$modx->context->getOption(\'request_param_alias\', \'q\')]);\\n\\t\\t$matches = explode(\'\\/\', rtrim($q, \'\\/\'));\\n\\t\\tif (count($matches) < 2) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\t$ticket_uri = array_pop($matches);\\n\\t\\t$section_uri = implode(\'\\/\', $matches) . \'\\/\';\\n\\n\\t\\tif ($section_id = $modx->findResource($section_uri)) {\\n\\t\\t\\t\\/** @var TicketsSection $section *\\/\\n\\t\\t\\tif ($section = $modx->getObject(\'TicketsSection\', $section_id)) {\\n\\t\\t\\t\\tif (is_numeric($ticket_uri)) {\\n\\t\\t\\t\\t\\t$ticket_id = $ticket_uri;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telseif (preg_match(\'#^\\\\d+#\', $ticket_uri, $tmp)) {\\n\\t\\t\\t\\t\\t$ticket_id = $tmp[0];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$properties = $section->getProperties(\'tickets\');\\n\\t\\t\\t\\t\\tif (!empty($properties[\'uri\']) && strpos($properties[\'uri\'], \'%id\') !== false) {\\n\\t\\t\\t\\t\\t\\t$pcre = str_replace(\'%id\', \'([0-9]+)\', $properties[\'uri\']);\\n\\t\\t\\t\\t\\t\\t$pcre = preg_replace(\'#(\\\\%[a-z]+)#\', \'(?:.*?)\', $pcre);\\n\\t\\t\\t\\t\\t\\tif (preg_match($pcre, $ticket_uri, $matches)) {\\n\\t\\t\\t\\t\\t\\t\\t$ticket_id = $matches[1];\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (!empty($ticket_id)) {\\n\\t\\t\\t\\t\\tif ($ticket = $modx->getObject(\'Ticket\', array(\'id\' => $ticket_id, \'deleted\' => 0))) {\\n\\t\\t\\t\\t\\t\\tif ($ticket->published) {\\n\\t\\t\\t\\t\\t\\t\\t$modx->sendRedirect($modx->makeUrl($ticket_id), array(\'responseCode\' => \'HTTP\\/1.1 301 Moved Permanently\'));\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\telseif ($unp_id = $modx->getOption(\'tickets.unpublished_ticket_page\')) {\\n\\t\\t\\t\\t\\t\\t\\t$modx->sendForward($unp_id);\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnLoadWebDocument\':\\n\\t\\t$authenticated = $modx->user->isAuthenticated($modx->context->get(\'key\'));\\n\\t\\t$key = \'Tickets_User\';\\n\\n\\t\\tif (!$authenticated && !$modx->getOption(\'tickets.count_guests\', false)) {\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\n\\t\\tif (empty($_COOKIE[$key])) {\\n\\t\\t\\tif (!empty($_SESSION[$key])) {\\n\\t\\t\\t\\t$guest_key = $_SESSION[$key];\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$guest_key = $_SESSION[$key] = md5(rand() . time() . rand());\\n\\t\\t\\t}\\n\\t\\t\\tsetcookie($key, $guest_key, time() + (86400 * 365), \'\\/\');\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$guest_key = $_COOKIE[$key];\\n\\t\\t}\\n\\n\\t\\tif (empty($_SESSION[$key])) {\\n\\t\\t\\t$_SESSION[$key] = $guest_key;\\n\\t\\t}\\n\\n\\t\\tif ($authenticated) {\\n\\t\\t\\t\\/** @var TicketAuthor $profile *\\/\\n\\t\\t\\tif (!$profile = $modx->user->getOne(\'AuthorProfile\')) {\\n\\t\\t\\t\\t$profile = $modx->newObject(\'TicketAuthor\');\\n\\t\\t\\t\\t$modx->user->addOne($profile);\\n\\t\\t\\t}\\n\\t\\t\\t$profile->set(\'visitedon\', time());\\n\\t\\t\\t$profile->save();\\n\\t\\t}\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnWebPageComplete\':\\n\\t\\t\\/** @var Tickets $Tickets *\\/\\n\\t\\t$Tickets = $modx->getService(\'tickets\');\\n\\t\\t$Tickets->logView($modx->resource->get(\'id\'));\\n\\t\\tbreak;\\n\\n\\n\\tcase \'OnUserSave\':\\n\\t\\t\\/** @var modUser $user *\\/\\n\\t\\tif ($mode == \'new\' && $user && !$user->getOne(\'AuthorProfile\')) {\\n\\t\\t\\t$profile = $modx->newObject(\'TicketAuthor\');\\n\\t\\t\\t$user->addOne($profile);\\n\\t\\t\\t$profile->save();\\n\\t\\t}\\n\\t\\tbreak;\\n\\n}"}',
        'guid' => 'e07489707ede4e158d27e9c6311fae8c',
        'native_key' => NULL,
        'signature' => '0f31587d19f8dc99d97cf0d86002efe6',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '19095df209d03f9f66451bf9ff90e0c4' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnDocFormSave","priority":0,"propertyset":0}',
              'guid' => '5e201c7f9f667f656df3250c6e6b02d3',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnDocFormSave',
              ),
              'signature' => '7c6a435c4f38467797b9518f751993e5',
            ),
            '21ee8fba3a6b3add7364b9a718256781' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnSiteRefresh","priority":0,"propertyset":0}',
              'guid' => '01a1d5bb8c3f34b9a0cc2b5efa4e746b',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnSiteRefresh',
              ),
              'signature' => '8aae7b5cf7498feed74f708c28928437',
            ),
            '5f63edde608b40391e809df6e847bb5b' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPagePrerender","priority":0,"propertyset":0}',
              'guid' => '20a10d493a9e60234f1318f17bc3d117',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPagePrerender',
              ),
              'signature' => '82f2b37dc7d21b084866aeb4452a67c1',
            ),
            'a7c6df42481c6659f0057282f385d5c0' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnPageNotFound","priority":0,"propertyset":0}',
              'guid' => '253771c51a8b2a69e9b33aabacd0d474',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnPageNotFound',
              ),
              'signature' => '167784f0431063cb567f2b3ed784373c',
            ),
            'a2905627e52be60d81bb7626f2ac8123' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnLoadWebDocument","priority":0,"propertyset":0}',
              'guid' => 'c722004d2ffe412c1df97899ac673007',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnLoadWebDocument',
              ),
              'signature' => '9b4ccaae2c74021a231a85ab7b543ee4',
            ),
            'f6949f4c368aacde4f78d9ab5e7f2119' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPageComplete","priority":0,"propertyset":0}',
              'guid' => 'eb15403a5e4c2b09956be65474a693b8',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPageComplete',
              ),
              'signature' => 'eabc0ca34924684d160854cdc4bcb746',
            ),
            'd6854a1c87949da9525eb756ae778fc4' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnEmptyTrash","priority":0,"propertyset":0}',
              'guid' => 'bc4a6bc474534fc362f35362a4b8430d',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnEmptyTrash',
              ),
              'signature' => '12f5e129fec67632527aec2b92d5259f',
            ),
            '85430b6c6bf71c3261fdc55aca2267a2' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnUserSave","priority":0,"propertyset":0}',
              'guid' => '561d3e79b4977e1cbc6093bd5108611d',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnUserSave',
              ),
              'signature' => '50707942917ec828ce8df3f1889753b9',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'tickets',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"tickets"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"tickets"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.tables_values.resolver","type":"php","name":"resolve.tables_values"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.policy.resolver","type":"php","name":"resolve.policy"}',
    ),
    5 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.actionfields.resolver","type":"php","name":"resolve.actionfields"}',
    ),
    6 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.update.resolver","type":"php","name":"resolve.update"}',
    ),
    7 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
    8 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.sources.resolver","type":"php","name":"resolve.sources"}',
    ),
    9 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.6.8-pl1\\/modCategory\\/5825b1b881d893b02f6ce9071e55036e.resolve.settings.resolver","type":"php","name":"resolve.settings"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '9f8b69523576785301fbcd0c05e7163d',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '5825b1b881d893b02f6ce9071e55036e',
  'native_key' => NULL,
  'object' => '{"id":null,"parent":0,"category":"Tickets","rank":0}',
);